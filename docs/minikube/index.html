<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-minikube">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="alternate" type="application/rss+xml" href="/cloud/blog/rss.xml" title="JS Cloud notes RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cloud/blog/atom.xml" title="JS Cloud notes Atom Feed"><title data-rh="true">minikube | JS Cloud notes</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://junsulee75.github.io/cloud/docs/minikube"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="minikube | JS Cloud notes"><meta data-rh="true" name="description" content="Minikube related hands-on notes"><meta data-rh="true" property="og:description" content="Minikube related hands-on notes"><link data-rh="true" rel="icon" href="/cloud/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://junsulee75.github.io/cloud/docs/minikube"><link data-rh="true" rel="alternate" href="https://junsulee75.github.io/cloud/docs/minikube" hreflang="en"><link data-rh="true" rel="alternate" href="https://junsulee75.github.io/cloud/docs/minikube" hreflang="x-default"><link rel="stylesheet" href="/cloud/assets/css/styles.7a7fd3ca.css">
<link rel="preload" href="/cloud/assets/js/runtime~main.915f7a11.js" as="script">
<link rel="preload" href="/cloud/assets/js/main.3de5cb3d.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cloud/"><div class="navbar__logo"><img src="/cloud/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/cloud/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">JS cloud notes</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cloud/docs/intro">Notes</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud/docs/intro">Readme</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cloud/docs/Db2/ps_AWS">Db2</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud/docs/cp4d/">cp4d</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud/docs/docker">Docker notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud/docs/kube">kube</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cloud/docs/linux/linux_misc">linux</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/cloud/docs/minikube">minikube</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cloud/docs/openshift/oc">openshift</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud/docs/podman">podman</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud/docs/podman_">podman</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud/docs/test">test</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cloud/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">minikube</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>minikube</h1><p>Minikube related hands-on notes       </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="contents">Contents<a class="hash-link" href="#contents" title="Direct link to heading">​</a></h2><ul><li><a href="#minikube">minikube</a><ul><li><a href="#contents">Contents</a></li><li><a href="#my-minikube-environment">My minikube environment</a><ul><li><a href="#windows">Windows</a></li></ul></li><li><a href="#operations">Operations</a><ul><li><a href="#connect-to-a-host-having-minikube-vm">Connect to a host having minikube VM</a></li><li><a href="#start-minikube">start minikube</a></li></ul></li><li><a href="#troubleshooting">Troubleshooting</a><ul><li><a href="#creating-vm-error">Creating VM error</a><ul><li><a href="#error">Error</a></li><li><a href="#resolution">Resolution</a></li></ul></li><li><a href="#bad-certificate">bad certificate</a><ul><li><a href="#error-1">Error</a></li><li><a href="#resolution-1">Resolution</a></li></ul></li></ul></li><li><a href="#commands-reference">Commands reference</a></li><li><a href="#system-outlook">System Outlook</a></li><li><a href="#reference">Reference</a></li><li><a href="#lab">Lab</a><ul><li><a href="#02-operating-containers">02 Operating containers</a></li><li><a href="#04-running-an-application">04 Running an Application</a><ul><li><a href="#deleting-poddeployment">Deleting pod/deployment</a></li><li><a href="#pod-without-a-default-command">pod without a default command</a></li><li><a href="#naked-pod--not-managed-by-deployment">Naked pod : not managed by deployment</a></li><li><a href="#lab-4-running-an-application-in-kubernetes">Lab 4. Running an Application in Kubernetes</a></li></ul></li><li><a href="#05-managing-application">05 Managing application</a><ul><li><a href="#labels">Labels</a></li><li><a href="#running-an-application">Running an application</a></li><li><a href="#namespace">namespace</a></li><li><a href="#managing-scailability--num-of-replicas">managing scailability : num of replicas</a></li><li><a href="#managing-application-updates-and-rollbacks">Managing application updates and rollbacks</a></li><li><a href="#lab-05-managing-deployment">Lab 05 Managing deployment</a></li></ul></li><li><a href="#06-exposing-applications-networking">06 Exposing applications (Networking)</a><ul><li><a href="#expose-a-deployment">Expose a deployment</a></li><li><a href="#scaling-the-deployment-will-add-ip-endpoints-as-pods-increases">Scaling the deployment will add IP Endpoints as PODs increases.</a></li><li><a href="#using-dns-in-k8s">Using DNS in k8s.</a></li><li><a href="#nslookup">nslookup</a></li><li><a href="#ingress">Ingress</a></li><li><a href="#lab-6-exposing-pods">Lab 6 Exposing Pods</a></li></ul></li><li><a href="#07-managing-pod-volumes">07 Managing Pod Volumes</a><ul><li><a href="#managing-pod-volumes">Managing Pod Volumes</a></li><li><a href="#using-persistent-volumes">Using persistent volumes</a></li><li><a href="#setting-up-pods-to-use-pvs">Setting up Pods to use PVs</a></li><li><a href="#dynamic-provisioning">Dynamic provisioning</a></li><li><a href="#using-configmaps">Using ConfigMaps</a></li><li><a href="#using-secret">Using Secret</a></li></ul></li></ul></li><li><a href="#test2">test2</a></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="my-minikube-environment">My minikube environment<a class="hash-link" href="#my-minikube-environment" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="windows">Windows<a class="hash-link" href="#windows" title="Direct link to heading">​</a></h3><p>On a ten years old Windows thinkpad laptop with 24 GB memory, <code>Fedora</code> VMware VM.<br>
<!-- -->Starting <code>minikube</code> by <code>KVM</code> on the Fedora VM.     </p><p><a href="#Contents">Go to content</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="operations">Operations<a class="hash-link" href="#operations" title="Direct link to heading">​</a></h2><p>My daily operations such as starting minikube etc.    </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="connect-to-a-host-having-minikube-vm">Connect to a host having minikube VM<a class="hash-link" href="#connect-to-a-host-having-minikube-vm" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh junsulee@fedora # login to fedora VM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo su -  # for operations needing root permission</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-minikube">start minikube<a class="hash-link" href="#start-minikube" title="Direct link to heading">​</a></h3><ul><li>Give KVM authority to users. give <code>libvirt</code> group to users.<br>Necessary to start <code>minikube</code> </li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># usermod -aG libvirt junsulee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># usermod -aG libvirt student</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># grep vmx /proc/cpuinfo    ## should have `vmx` </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Start by a non root user      </li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">minikube start --memory 4096 --vm-driver=kvm2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>example :  </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora ~]$ minikube start --memory 4096 --vm-driver=kvm2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* minikube v1.20.0 on Fedora 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Using the kvm2 driver based on user configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Starting control plane node minikube in cluster minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Creating kvm2 VM (CPUs=2, Memory=4096MB, Disk=20000MB) ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Preparing Kubernetes v1.20.2 on Docker 20.10.6 ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Generating certificates and keys ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Booting up control plane ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Configuring RBAC rules ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Verifying Kubernetes components...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Using image gcr.io/k8s-minikube/storage-provisioner:v5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Enabled addons: default-storageclass, storage-provisioner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Done! kubectl is now configured to use &quot;minikube&quot; cluster and &quot;default&quot; namespace by default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When starting after system halt    </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ minikube start --memory 4096 --vm-driver=kvm2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* minikube v1.20.0 on Fedora 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* minikube 1.22.0 is available! Download it: https://github.com/kubernetes/minikube/releases/tag/v1.22.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* To disable this notice, run: &#x27;minikube config set WantUpdateNotification false&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Using the kvm2 driver based on existing profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Starting control plane node minikube in cluster minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Restarting existing kvm2 VM for &quot;minikube&quot; ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Preparing Kubernetes v1.20.2 on Docker 20.10.6 ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">X Problems detected in kubelet:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Aug 29 23:38:41 minikube kubelet[2691]: E0829 23:38:41.239851    2691 pod_workers.go:191] Error syncing pod b320587ee357c92247809ba00ce3080a (&quot;kube-apiserver-minikube_kube-system(b320587ee357c92247809ba00ce3080a)&quot;), skipping: failed to &quot;StartContainer&quot; for &quot;kube-apiserver&quot; with CrashLoopBackOff: &quot;back-off 20s restarting failed container=kube-apiserver pod=kube-apiserver-minikube_kube-system(b320587ee357c92247809ba00ce3080a)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">X Problems detected in kubelet:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Aug 29 23:38:41 minikube kubelet[2691]: E0829 23:38:41.239851    2691 pod_workers.go:191] Error syncing pod b320587ee357c92247809ba00ce3080a (&quot;kube-apiserver-minikube_kube-system(b320587ee357c92247809ba00ce3080a)&quot;), skipping: failed to &quot;StartContainer&quot; for &quot;kube-apiserver&quot; with CrashLoopBackOff: &quot;back-off 20s restarting failed container=kube-apiserver pod=kube-apiserver-minikube_kube-system(b320587ee357c92247809ba00ce3080a)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Aug 29 23:38:50 minikube kubelet[2691]: E0829 23:38:50.122463    2691 pod_workers.go:191] Error syncing pod b320587ee357c92247809ba00ce3080a (&quot;kube-apiserver-minikube_kube-system(b320587ee357c92247809ba00ce3080a)&quot;), skipping: failed to &quot;StartContainer&quot; for &quot;kube-apiserver&quot; with CrashLoopBackOff: &quot;back-off 20s restarting failed container=kube-apiserver pod=kube-apiserver-minikube_kube-system(b320587ee357c92247809ba00ce3080a)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Aug 29 23:38:51 minikube kubelet[2691]: E0829 23:38:51.165528    2691 pod_workers.go:191] Error syncing pod 474c55dfb64741cc485e46b6bb9f2dc0 (&quot;kube-controller-manager-minikube_kube-system(474c55dfb64741cc485e46b6bb9f2dc0)&quot;), skipping: failed to &quot;StartContainer&quot; for &quot;kube-controller-manager&quot; with CrashLoopBackOff: &quot;back-off 20s restarting failed container=kube-controller-manager pod=kube-controller-manager-minikube_kube-system(474c55dfb64741cc485e46b6bb9f2dc0)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Aug 29 23:38:54 minikube kubelet[2691]: E0829 23:38:54.439750    2691 pod_workers.go:191] Error syncing pod 474c55dfb64741cc485e46b6bb9f2dc0 (&quot;kube-controller-manager-minikube_kube-system(474c55dfb64741cc485e46b6bb9f2dc0)&quot;), skipping: failed to &quot;StartContainer&quot; for &quot;kube-controller-manager&quot; with CrashLoopBackOff: &quot;back-off 20s restarting failed container=kube-controller-manager pod=kube-controller-manager-minikube_kube-system(474c55dfb64741cc485e46b6bb9f2dc0)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">! Unable to restart cluster, will reset it: apiserver health: apiserver healthz never reported healthy: cluster wait timed out during healthz check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Generating certificates and keys ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Booting up control plane ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Configuring RBAC rules ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Verifying Kubernetes components...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Using image gcr.io/k8s-minikube/storage-provisioner:v5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Enabled addons: default-storageclass, storage-provisioner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Done! kubectl is now configured to use &quot;minikube&quot; cluster and &quot;default&quot; namespace by default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="#Contents">Go to content</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-vm-error">Creating VM error<a class="hash-link" href="#creating-vm-error" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="error">Error<a class="hash-link" href="#error" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">! StartHost failed, but will try again: creating host: create: Error creating machine: Error in driver during machine creation: error creating VM: virError(Code=1, Domain=10, Message=&#x27;internal error: process exited while connecting to monitor: 2021-05-17T07:32:21.253962Z qemu-system-x86_64: error: failed to set MSR 0x48f to 0x7fffff00036dfb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-x86_64: ../target/i386/kvm.c:2701: kvm_buf_set_msrs: Assertion `ret == cpu-&gt;kvm_msr_buf-&gt;nmsrs&#x27; failed.&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Creating kvm2 VM (CPUs=2, Memory=4096MB, Disk=20000MB) ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution">Resolution<a class="hash-link" href="#resolution" title="Direct link to heading">​</a></h4><p><a href="https://github.com/kubernetes/minikube/issues/2968" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes/minikube/issues/2968</a>
<a href="https://github.com/kubernetes/minikube/issues/2412" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes/minikube/issues/2412</a></p><p>On vmware configuration, turn on &#x27;Virtualize CPU performance counters&#x27;.     </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bad-certificate"><a href="https://stackoverflow.com/questions/71542604/minikube-remote-error-tls-bad-certificate" target="_blank" rel="noopener noreferrer">bad certificate</a><a class="hash-link" href="#bad-certificate" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="error-1">Error<a class="hash-link" href="#error-1" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ minikube_start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">😄  minikube v1.20.0 on Fedora 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">✨  Using the kvm2 driver based on existing profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">👍  Starting control plane node minikube in cluster minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">🔄  Restarting existing kvm2 VM for &quot;minikube&quot; ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">🐳  Preparing Kubernetes v1.20.2 on Docker 20.10.6 ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">❌  Problems detected in etcd [4e630926db47]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2022-05-21 04:49:16.015098 I | embed: rejected connection from &quot;127.0.0.1:53760&quot; (error &quot;remote error: tls: bad certificate&quot;, ServerName &quot;&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2022-05-21 04:49:19.119305 I | embed: rejected connection from &quot;127.0.0.1:53766&quot; (error &quot;remote error: tls: bad certificate&quot;, ServerName &quot;&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2022-05-21 04:49:20.231942 I | embed: rejected connection from &quot;127.0.0.1:53774&quot; (error &quot;remote error: tls: bad certificate&quot;, ServerName &quot;&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-1">Resolution<a class="hash-link" href="#resolution-1" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl config view</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl config delete-cluster minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube delete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube start --memory 4096 --vm-driver=kvm2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="commands-reference">Commands reference<a class="hash-link" href="#commands-reference" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">minikube dashboard   ## works in fedora GUI. Opening web browser</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="system-outlook">System Outlook<a class="hash-link" href="#system-outlook" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   17</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get nodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME       STATUS   ROLES                  AGE   VERSION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube   Ready    control-plane,master   6d    v1.20.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl cluster-info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Kubernetes control plane is running at https://192.168.39.235:8443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KubeDNS is running at https://192.168.39.235:8443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get all -A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE              NAME                                            READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default                pod/cmd-nginx-57bb5f6747-hznc7                  1/1     Running   1          4d18h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default                pod/cmd-nginx-57bb5f6747-kmkjr                  1/1     Running   1          4d17h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default                pod/redis-6fb5b985bc-s6gpq                      1/1     Running   0          4d2h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            pod/coredns-74ff55c5b-qgdjv                     1/1     Running   3          123d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            pod/etcd-minikube                               1/1     Running   33         123d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            pod/kube-apiserver-minikube                     1/1     Running   78         123d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            pod/kube-controller-manager-minikube            1/1     Running   11         123d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            pod/kube-proxy-x48k4                            1/1     Running   3          123d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            pod/kube-scheduler-minikube                     1/1     Running   3          123d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            pod/storage-provisioner                         1/1     Running   133        123d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard   pod/dashboard-metrics-scraper-f6647bd8c-7hgqz   1/1     Running   3          122d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard   pod/kubernetes-dashboard-968bcb79-lktd2         1/1     Running   69         122d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">myspace                pod/busybox2                                    1/1     Running   337        88d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE              NAME                                TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                  AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default                service/kubernetes                  ClusterIP   10.96.0.1        &lt;none&gt;        443/TCP                  123d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            service/kube-dns                    ClusterIP   10.96.0.10       &lt;none&gt;        53/UDP,53/TCP,9153/TCP   123d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard   service/dashboard-metrics-scraper   ClusterIP   10.105.137.234   &lt;none&gt;        8000/TCP                 122d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard   service/kubernetes-dashboard        ClusterIP   10.101.187.187   &lt;none&gt;        80/TCP                   122d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE     NAME                        DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR            AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   daemonset.apps/kube-proxy   1         1         1       1            1           kubernetes.io/os=linux   123d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE              NAME                                        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default                deployment.apps/cmd-nginx                   1/1     1            1           4d18h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default                deployment.apps/redis                       1/1     1            1           4d2h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            deployment.apps/coredns                     1/1     1            1           123d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard   deployment.apps/dashboard-metrics-scraper   1/1     1            1           122d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard   deployment.apps/kubernetes-dashboard        1/1     1            1           122d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE              NAME                                                  DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default                replicaset.apps/cmd-nginx-57bb5f6747                  1         1         1       4d18h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default                replicaset.apps/redis-6fb5b985bc                      1         1         1       4d2h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            replicaset.apps/coredns-74ff55c5b                     1         1         1       123d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard   replicaset.apps/dashboard-metrics-scraper-f6647bd8c   1         1         1       122d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard   replicaset.apps/kubernetes-dashboard-968bcb79         1         1         1       122d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For further debug and diagnose cluster problems, use &#x27;kubectl cluster-info dump&#x27;.      </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl config view</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clusters:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- cluster:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    certificate-authority: /home/junsulee/.minikube/ca.crt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    extensions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - extension:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        last-update: Sat, 14 May 2022 13:01:44 AEST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        provider: minikube.sigs.k8s.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        version: v1.20.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: cluster_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server: https://192.168.39.235:8443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contexts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- context:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cluster: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    extensions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - extension:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        last-update: Sat, 14 May 2022 13:01:44 AEST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        provider: minikube.sigs.k8s.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        version: v1.20.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: context_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">current-context: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">preferences: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">users:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  user:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client-certificate: /home/junsulee/.minikube/profiles/minikube/client.crt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client-key: /home/junsulee/.minikube/profiles/minikube/client.key</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a class="hash-link" href="#reference" title="Direct link to heading">​</a></h2><p><a href="https://github.com/sandervanvugt/kubernetes" target="_blank" rel="noopener noreferrer">Oreilly kubernetes education github repository</a></p><p><a href="https://borysneselovskyi.wordpress.com/2018/02/19/kvm-virtualization-on-top-of-the-vmware-workstation-12-guest-vms/" target="_blank" rel="noopener noreferrer">KVM Virtualization on VMware 12</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lab">Lab<a class="hash-link" href="#lab" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="02-operating-containers">02 Operating containers<a class="hash-link" href="#02-operating-containers" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ docker run --rm -v /dev/log:/dev/log fedora:latest logger &quot;Message from the container&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Unable to find image &#x27;fedora:latest&#x27; locally</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">latest: Pulling from library/fedora</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">70fb9965a23f: Pull complete </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Digest: sha256:0c18a515203b836ea840f7033a11d6833f9468fda6a99f5a29695cfbaf43f24a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Status: Downloaded newer image for fedora:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ journalctl |grep container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Oct 03 20:40:39 fedora root[52426]: Message from the container</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="04-running-an-application">04 Running an Application<a class="hash-link" href="#04-running-an-application" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="deleting-poddeployment">Deleting pod/deployment<a class="hash-link" href="#deleting-poddeployment" title="Direct link to heading">​</a></h4><p>To start from scratch, check existing deployment/pod, then delete.        </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx   1/1     1            1           32d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                         READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx-57bb5f6747-tv4sb   1/1     Running   0          31s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>At this time, the pod runs again with different name because of deployment.<br>
<!-- -->to clear, need to delete deployment together.   </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl delete deployment cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps &quot;cmd-nginx&quot; deleted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No resources found in default namespace.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                         READY   STATUS        RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx-57bb5f6747-tv4sb   0/1     Terminating   0          6m58s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl delete pod cmd-nginx-57bb5f6747-tv4sb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod &quot;cmd-nginx-57bb5f6747-tv4sb&quot; deleted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No resources found in default namespace.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pod-without-a-default-command">pod without a default command<a class="hash-link" href="#pod-without-a-default-command" title="Direct link to heading">​</a></h4><p>Creating a pod that does not have a default command becomes abnormal status.   </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create deployment my-dep --image=busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/my-dep created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                      READY   STATUS              RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my-dep-68d7dcffc4-fvzsp   0/1     ContainerCreating   0          10s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ date;kubectl get pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sat 17 Sep 2022 13:18:40 AEST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                      READY   STATUS      RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my-dep-68d7dcffc4-fvzsp   0/1     Completed   0          22s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ date;kubectl get pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sat 17 Sep 2022 13:18:48 AEST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                      READY   STATUS             RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">my-dep-68d7dcffc4-fvzsp   0/1     CrashLoopBackOff   1          30s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Check the history.    </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kube</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ kubectl describe pod my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">dep</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">68d7dcffc4</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">fvzsp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">..</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Tolerations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">     node.kubernetes.io/not</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ready</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">NoExecute op=Exists for 300s       &lt;======</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 node.kubernetes.io/unreachable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">NoExecute op=Exists for 300s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">..</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="naked-pod--not-managed-by-deployment">Naked pod : not managed by deployment<a class="hash-link" href="#naked-pod--not-managed-by-deployment" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cat busybox.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: busybox2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - name: busy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;3600&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create -f busybox.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/busybox2 created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME           READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/busybox2   1/1     Running   0          22s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   118d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl delete -f busybox.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod &quot;busybox2&quot; deleted</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="lab-4-running-an-application-in-kubernetes">Lab 4. Running an Application in Kubernetes<a class="hash-link" href="#lab-4-running-an-application-in-kubernetes" title="Direct link to heading">​</a></h4><p>create an example pod again </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create deployment cmd-nginx --image=nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx   0/1     1            0           8s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                         READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx-57bb5f6747-bgqz4   1/1     Running   0          15s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get deployment.apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx   1/1     1            1           18h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create yaml referring existing apps.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get deployment.apps -o yaml &gt; myngnix.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ cat myngnix.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">items:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      deployment.kubernetes.io/revision: &quot;1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    creationTimestamp: &quot;2022-06-24T05:14:35Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    generation: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      app: cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resourceVersion: &quot;1619298&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uid: ab2c24aa-c432-42b0-ad9a-7340019c1c5c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    progressDeadlineSeconds: 600</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    revisionHistoryLimit: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app: cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    strategy:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      rollingUpdate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        maxSurge: 25%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        maxUnavailable: 25%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type: RollingUpdate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        creationTimestamp: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          app: cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - image: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          imagePullPolicy: Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          resources: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          terminationMessagePath: /dev/termination-log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          terminationMessagePolicy: File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dnsPolicy: ClusterFirst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        restartPolicy: Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        schedulerName: default-scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        securityContext: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        terminationGracePeriodSeconds: 30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  status:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    availableReplicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    conditions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - lastTransitionTime: &quot;2022-06-24T05:14:48Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      lastUpdateTime: &quot;2022-06-24T05:14:48Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      message: Deployment has minimum availability.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      reason: MinimumReplicasAvailable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status: &quot;True&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type: Available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - lastTransitionTime: &quot;2022-06-24T05:14:35Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      lastUpdateTime: &quot;2022-06-24T05:14:48Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      message: ReplicaSet &quot;cmd-nginx-57bb5f6747&quot; has successfully progressed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      reason: NewReplicaSetAvailable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status: &quot;True&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type: Progressing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    observedGeneration: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    readyReplicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    updatedReplicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: List</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resourceVersion: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selfLink: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Remove unnecessary parts. ( creationTimestamp, resourceVersion, uid, status etc)     </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cp myngnix.yaml myngnix_org.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ cat myngnix.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">items:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      deployment.kubernetes.io/revision: &quot;1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    generation: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      app: cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    progressDeadlineSeconds: 600</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    revisionHistoryLimit: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app: cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    strategy:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      rollingUpdate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        maxSurge: 25%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        maxUnavailable: 25%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type: RollingUpdate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        creationTimestamp: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          app: cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - image: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          imagePullPolicy: Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          resources: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          terminationMessagePath: /dev/termination-log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          terminationMessagePolicy: File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dnsPolicy: ClusterFirst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        restartPolicy: Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        schedulerName: default-scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        securityContext: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        terminationGracePeriodSeconds: 30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ diff myngnix_org.yaml myngnix.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">8d7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     creationTimestamp: &quot;2022-06-24T05:14:35Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">14,15d12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     resourceVersion: &quot;1619298&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     uid: ab2c24aa-c432-42b0-ad9a-7340019c1c5c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">46,68d42</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;   status:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     availableReplicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     conditions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     - lastTransitionTime: &quot;2022-06-24T05:14:48Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       lastUpdateTime: &quot;2022-06-24T05:14:48Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       message: Deployment has minimum availability.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       reason: MinimumReplicasAvailable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       status: &quot;True&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       type: Available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     - lastTransitionTime: &quot;2022-06-24T05:14:35Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       lastUpdateTime: &quot;2022-06-24T05:14:48Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       message: ReplicaSet &quot;cmd-nginx-57bb5f6747&quot; has successfully progressed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       reason: NewReplicaSetAvailable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       status: &quot;True&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       type: Progressing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     observedGeneration: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     readyReplicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     updatedReplicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; kind: List</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;   resourceVersion: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;   selfLink: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="05-managing-application">05 Managing application<a class="hash-link" href="#05-managing-application" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels">Labels<a class="hash-link" href="#labels" title="Direct link to heading">​</a></h4><p>Many k8s API Objects are using labels to connect to other objects.     </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get all --show-labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                             READY   STATUS    RESTARTS   AGE   LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-bgqz4   1/1     Running   0          20h   app=cmd-nginx,pod-template-hash=57bb5f6747</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE   LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   34d   component=apiserver,provider=kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                        READY   UP-TO-DATE   AVAILABLE   AGE   LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx   1/1     1            1           20h   app=cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                   DESIRED   CURRENT   READY   AGE   LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/cmd-nginx-57bb5f6747   1         1         1       20h   app=cmd-nginx,pod-template-hash=57bb5f6747</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora work]$ kubectl label pods ^C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora work]$ kubectl get pods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                         READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx-57bb5f6747-bgqz4   1/1     Running   0          20h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Set Label</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl label pods cmd-nginx-57bb5f6747-bgqz4 app-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-bgqz4 labeled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get all --show-labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                             READY   STATUS    RESTARTS   AGE   LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-6clxd   1/1     Running   0          44s   app=cmd-nginx,pod-template-hash=57bb5f6747</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-bgqz4   1/1     Running   0          20h   pod-template-hash=57bb5f6747</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE   LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   34d   component=apiserver,provider=kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                        READY   UP-TO-DATE   AVAILABLE   AGE   LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx   1/1     1            1           20h   app=cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                   DESIRED   CURRENT   READY   AGE   LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/cmd-nginx-57bb5f6747   1         1         1       20h   app=cmd-nginx,pod-template-hash=57bb5f6747</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Using <code>app0</code> removes the label part <code>app=cmd-nginx</code> from existing pod label, k8s created new pod with the existing name<br>
<!-- -->because k8s monitors the label and make sure specific amount of the label is available.<br>
<!-- -->It means k8s does not look at the pod itself but looking at the <code>label</code>.      </p><p>Display all objects with a specific label.    </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get all --selector app=cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                             READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-kmkjr   1/1     Running   0          14m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx   1/1     1            1           52m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                   DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/cmd-nginx-57bb5f6747   1         1         1       52m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-an-application">Running an application<a class="hash-link" href="#running-an-application" title="Direct link to heading">​</a></h4><p>Do not use naked pods as it misses k8s benefits such as scalability etc.<br>
<!-- -->Better to use with a deployment that monitors and manages a pod.    </p><p><code>Deployment</code> specification from <code>template</code>.    </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ cat redis</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deploy.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6379</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Error due to wrong version.     </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl create -f redis-deploy.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error: unable to recognize &quot;redis-deploy.yaml&quot;: no matches for kind &quot;Deployment&quot; in version &quot;apps/v1beta</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Correcting and creating again.<br>
<code>apiVersion: apps/v1beta1</code>  =&gt;  <code>apiVersion: apps/v1</code>     </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl create -f redis-deploy.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/redis created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx   1/1     1            1           20h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis       0/1     1            0           9s     &lt;====</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get pods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                         READY   STATUS              RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx-57bb5f6747-6clxd   1/1     Running             0          39m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx-57bb5f6747-bgqz4   1/1     Running             0          20h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis-6fb5b985bc-6q7fk       0/1     ContainerCreating   0          16s  &lt;=====  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get deployment --show-labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        READY   UP-TO-DATE   AVAILABLE   AGE    LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx   1/1     1            1           20h    app=cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis       1/1     1            1           2m8s   app=redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get all --selector app=redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                         READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/redis-6fb5b985bc-6q7fk   1/1     Running   0          2m21s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                    READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/redis   1/1     1            1           2m21s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                               DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/redis-6fb5b985bc   1         1         1       2m21s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="namespace">namespace<a class="hash-link" href="#namespace" title="Direct link to heading">​</a></h4><p>Download namespace related utilities.     </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/ahmetb/kubectx  # Download kubectx packages.    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp kubectx/kubensx /usr/local/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp kubectx/kubens /usr/local/bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Namespace list    </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubens</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-node-lease</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get ns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                   STATUS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default                Active   34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-node-lease        Active   34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-public            Active   34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            Active   34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard   Active   33d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Switching between namespaces</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubens kube-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Context &quot;minikube&quot; modified.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Active namespace is &quot;kube-system&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                   READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/coredns-74ff55c5b-qgdjv            1/1     Running   1          34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/etcd-minikube                      1/1     Running   26         34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/kube-apiserver-minikube            1/1     Running   60         34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/kube-controller-manager-minikube   1/1     Running   3          34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/kube-proxy-x48k4                   1/1     Running   1          34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/kube-scheduler-minikube            1/1     Running   1          34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/storage-provisioner                1/1     Running   107        34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME               TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)                  AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/kube-dns   ClusterIP   10.96.0.10   &lt;none&gt;        53/UDP,53/TCP,9153/TCP   34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                        DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR            AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">daemonset.apps/kube-proxy   1         1         1       1            1           kubernetes.io/os=linux   34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                      READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/coredns   1/1     1            1           34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/coredns-74ff55c5b   1         1         1       34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubens</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-node-lease</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubens default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Context &quot;minikube&quot; modified.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Active namespace is &quot;default&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                             READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-6clxd   1/1     Running   0          89m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-bgqz4   1/1     Running   0          21h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/redis-6fb5b985bc-6q7fk       1/1     Running   0          50m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx   1/1     1            1           21h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/redis       1/1     1            1           50m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                   DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/cmd-nginx-57bb5f6747   1         1         1       21h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/redis-6fb5b985bc       1         1         1       50m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>K8s current configuration</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ cd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora ~]$ cd .kube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora .kube]$ cat config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clusters:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- cluster:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    certificate-authority: /home/junsulee/.minikube/ca.crt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    extensions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - extension:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        last-update: Wed, 22 Jun 2022 12:12:20 AEST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        provider: minikube.sigs.k8s.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        version: v1.20.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: cluster_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server: https://192.168.39.25:8443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contexts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- context:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cluster: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    extensions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - extension:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        last-update: Wed, 22 Jun 2022 12:12:20 AEST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        provider: minikube.sigs.k8s.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        version: v1.20.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: context_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">current-context: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">preferences: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">users:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  user:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client-certificate: /home/junsulee/.minikube/profiles/minikube/client.crt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client-key: /home/junsulee/.minikube/profiles/minikube/client.key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Dashboard related resources    </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kube]$ kubectl get all -n kubernetes-dashboard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                            READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/dashboard-metrics-scraper-f6647bd8c-7hgqz   1/1     Running   3          118d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/kubernetes-dashboard-968bcb79-lktd2         1/1     Running   69         118d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)    AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/dashboard-metrics-scraper   ClusterIP   10.105.137.234   &lt;none&gt;        8000/TCP   118d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/kubernetes-dashboard        ClusterIP   10.101.187.187   &lt;none&gt;        80/TCP     118d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/dashboard-metrics-scraper   1/1     1            1           118d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/kubernetes-dashboard        1/1     1            1           118d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                                  DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/dashboard-metrics-scraper-f6647bd8c   1         1         1       118d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/kubernetes-dashboard-968bcb79         1         1         1       118d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>K8s core related resources</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kube]$ kubectl get all -n kube-system </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                   READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/coredns-74ff55c5b-qgdjv            1/1     Running   3          119d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/etcd-minikube                      1/1     Running   33         119d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/kube-apiserver-minikube            1/1     Running   78         119d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/kube-controller-manager-minikube   1/1     Running   11         119d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/kube-proxy-x48k4                   1/1     Running   3          119d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/kube-scheduler-minikube            1/1     Running   3          119d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/storage-provisioner                1/1     Running   132        119d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME               TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)                  AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/kube-dns   ClusterIP   10.96.0.10   &lt;none&gt;        53/UDP,53/TCP,9153/TCP   119d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                        DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR            AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">daemonset.apps/kube-proxy   1         1         1       1            1           kubernetes.io/os=linux   119d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                      READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/coredns   1/1     1            1           119d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/coredns-74ff55c5b   1         1         1       119d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create a namespace and a pod on the namespace.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora .kube]$ kubectl create ns myspace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace/myspace created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubens</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default  &lt;=== current</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-node-lease</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">myspace   &lt;=== new</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl create -f busybox.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/busybox2 created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># expected error creating same name pod in the same namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl create -f busybox.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error from server (AlreadyExists): error when creating &quot;busybox.yaml&quot;: pods &quot;busybox2&quot; already exists</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ cp busybox.yaml busbox2.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># corrected namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ cat busybox2.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: busybox2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: myspace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - name: busy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;3600&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl create -f busybox2.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/busybox2 created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get all -n myspace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME           READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/busybox2   1/1     Running   0          92s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="managing-scailability--num-of-replicas">managing scailability : num of replicas<a class="hash-link" href="#managing-scailability--num-of-replicas" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">junsulee@fedora kubernetes]$ kubectl get deployments.apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx   1/1     1            1           22h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis       1/1     1            1           81m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl edit deployment cmd-nginx   # change `replicas` from 1 to 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx edited</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get deployments.apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx   2/2     2            2           22h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis       1/1     1            1           86m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get deployments.apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx   2/2     2            2           22h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis       1/1     1            1           86m </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl scale --replicas=1 cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error: the server doesn&#x27;t have a resource type &quot;cmd-nginx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl scale --replicas=1 deployment cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx scaled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get deployments.apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx   1/1     1            1           22h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis       1/1     1            1           102m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="managing-application-updates-and-rollbacks">Managing application updates and rollbacks<a class="hash-link" href="#managing-application-updates-and-rollbacks" title="Direct link to heading">​</a></h4><p>Create a pod for test</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl create deployment rollingnginx --image=nginx:1.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/rollingnginx created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                READY   STATUS      RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/rollingnginx-785db9758d-7k6zc   1/1     Running     0          62s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl rollout history deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION  CHANGE-CAUSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1         &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION  CHANGE-CAUSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1         &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION  CHANGE-CAUSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1         &lt;none&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Edit version.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl edit deployments.apps rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">..</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- image: nginx:1.8    &lt;=== changed to 1.15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">..</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl rollout history deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION  CHANGE-CAUSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1         &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION  CHANGE-CAUSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1         &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION  CHANGE-CAUSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1         &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2         &lt;none&gt;     &lt;======</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl describe deployments.apps rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name:                   rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Namespace:              default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CreationTimestamp:      Sat, 25 Jun 2022 14:03:49 +1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Labels:                 app=rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Annotations:            deployment.kubernetes.io/revision: 2    &lt;====</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Selector:               app=rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Replicas:               1 desired | 1 updated | 1 total | 1 available | 0 unavailable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StrategyType:           RollingUpdate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MinReadySeconds:        0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RollingUpdateStrategy:  25% max unavailable, 25% max surge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pod Template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Labels:  app=rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   nginx:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Image:        nginx:1.15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Port:         &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Host Port:    &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Environment:  &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Mounts:       &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Volumes:        &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Conditions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type           Status  Reason</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ----           ------  ------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Available      True    MinimumReplicasAvailable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Progressing    True    NewReplicaSetAvailable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OldReplicaSets:  &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NewReplicaSet:   rollingnginx-58cff98f76 (1/1 replicas created)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Events:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type    Reason             Age    From                   Message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ----    ------             ----   ----                   -------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  ScalingReplicaSet  8m51s  deployment-controller  Scaled up replica set rollingnginx-785db9758d to 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  ScalingReplicaSet  104s   deployment-controller  Scaled up replica set rollingnginx-58cff98f76 to 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  ScalingReplicaSet  62s    deployment-controller  Scaled down replica set rollingnginx-785db9758d to 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Check version for each revision.    </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl rollout history deployment rollingnginx --revision=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/rollingnginx with revision #1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pod Template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Labels:   app=rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pod-template-hash=785db9758d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   nginx:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Image:  nginx:1.8     &lt;====</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Port:   &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Host Port:  &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Environment:    &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Mounts: &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Volumes:  &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl rollout history deployment rollingnginx --revision=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/rollingnginx with revision #2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pod Template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Labels:   app=rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pod-template-hash=58cff98f76</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   nginx:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Image:  nginx:1.15    &lt;====</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Port:   &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Host Port:  &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Environment:    &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Mounts: &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Volumes:  &lt;none&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Two replica sets are shown. Old one will be gone eventually.<br>
<!-- -->While old replica set is still being displayed, you can do rollback.     </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/busybox2                        1/1     Running   1          72m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-6clxd      1/1     Running   0          173m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-bgqz4      1/1     Running   0          23h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/redis-6fb5b985bc-6q7fk          1/1     Running   0          134m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/rollingnginx-58cff98f76-997zw   1/1     Running   0          6m15s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                           READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx      1/1     1            1           23h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/redis          1/1     1            1           134m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/rollingnginx   1/1     1            1           13m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                      DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/cmd-nginx-57bb5f6747      1         1         1       23h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/redis-6fb5b985bc          1         1         1       134m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/rollingnginx-58cff98f76   1         1         1       6m17s    &lt;=== new revision   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/rollingnginx-785db9758d   0         0         0       13m      &lt;=== old one is emptied.    </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Rollback </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl rollout undo deployment rollingnginx --to-revision=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/rollingnginx rolled back</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/busybox2                        1/1     Running   1          76m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-6clxd      1/1     Running   0          177m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-bgqz4      1/1     Running   0          23h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/redis-6fb5b985bc-6q7fk          1/1     Running   0          138m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/rollingnginx-785db9758d-kzgd5   1/1     Running   0          79s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                           READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx      1/1     1            1           23h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/redis          1/1     1            1           138m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/rollingnginx   1/1     1            1           16m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                      DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/cmd-nginx-57bb5f6747      1         1         1       23h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/redis-6fb5b985bc          1         1         1       138m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/rollingnginx-58cff98f76   0         0         0       9m45s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/rollingnginx-785db9758d   1         1         1       16m   &lt;==== pod went to old one   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="lab-05-managing-deployment">Lab 05 Managing deployment<a class="hash-link" href="#lab-05-managing-deployment" title="Direct link to heading">​</a></h4><p>Create yaml file only. ( --dry-run  )       </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create deployment lab5-nginx --image=nginx --dry-run --output=yaml &gt; lab5-nginx.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Change.    </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cat lab5</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nginx.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">creationTimestamp</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> lab5</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ngnix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> lab5</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ngnix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">## 1 -&gt; 3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> lab5</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ngnix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">strategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">creationTimestamp</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> lab5</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ngnix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ngnix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1.8</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">## ngnix : latest version. specify preferred version.    </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ngnix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create -f lab5-nginx.yaml  # create</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get all --selector app=lab5-nginx  # list all resources with the tabel   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                              READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/lab5-nginx-75588bfdc4-4vkzv   1/1     Running   0          56s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/lab5-nginx-75588bfdc4-78ms9   1/1     Running   0          56s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/lab5-nginx-75588bfdc4-98krb   1/1     Running   0          56s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                         READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/lab5-nginx   3/3     3            3           56s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                    DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/lab5-nginx-75588bfdc4   3         3         3       56s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl scale deployment lab5-nginx --replicas=4   # increase   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get all --selector app=lab5-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                              READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/lab5-nginx-75588bfdc4-4vkzv   1/1     Running   0          2m15s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/lab5-nginx-75588bfdc4-78ms9   1/1     Running   0          2m15s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/lab5-nginx-75588bfdc4-98krb   1/1     Running   0          2m15s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/lab5-nginx-75588bfdc4-r8m2f   1/1     Running   0          12s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                         READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/lab5-nginx   4/4     4            4           2m15s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                    DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/lab5-nginx-75588bfdc4   4         4         4       2m15s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl edit deployments.apps lab5-nginx   # change the version  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - image: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@api.jscp4d.cp.fyre.ibm.com work]# kubectl get all --selector app=lab5-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                              READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/lab5-nginx-75f4f8d9f7-295vn   1/1     Running   0          27s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/lab5-nginx-75f4f8d9f7-7rs9c   1/1     Running   0          17s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/lab5-nginx-75f4f8d9f7-ldcs6   1/1     Running   0          27s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/lab5-nginx-75f4f8d9f7-xl98h   1/1     Running   0          17s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                         READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/lab5-nginx   4/4     4            4           4m48s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                    DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/lab5-nginx-75588bfdc4   0         0         0       4m48s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/lab5-nginx-75f4f8d9f7   4         4         4       27s     &lt;===== new version  deployment     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="06-exposing-applications-networking">06 Exposing applications (Networking)<a class="hash-link" href="#06-exposing-applications-networking" title="Direct link to heading">​</a></h3><p>Create a yaml with multiple pods.<br>
<!-- -->Not caring about what the pods do but focusing on how network is organized.      </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cat busybox_multi.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> verybusy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3600&quot;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> box</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3600&quot;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">f busybox_multi.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/verybusy created</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Each pod has its own IP addresses.   </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pods -o wide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                            READY   STATUS    RESTARTS   AGE     IP            NODE       NOMINATED NODE   READINESS GATES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx-57bb5f6747-hznc7      1/1     Running   1          5d23h   172.17.0.5    minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx-57bb5f6747-kmkjr      1/1     Running   1          5d23h   172.17.0.3    minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lab5-nginx-7777d7964c-5pc68     1/1     Running   0          33m     172.17.0.13   minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lab5-nginx-7777d7964c-rkfz2     1/1     Running   0          33m     172.17.0.14   minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lab5-nginx-7777d7964c-v9kn6     1/1     Running   0          33m     172.17.0.15   minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lab5-nginx-7777d7964c-vdlxm     1/1     Running   0          33m     172.17.0.11   minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis-6fb5b985bc-s6gpq          1/1     Running   0          5d8h    172.17.0.8    minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rollingnginx-785db9758d-p5k8v   1/1     Running   0          25h     172.17.0.9    minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">verybusy                        2/2     Running   0          42s     172.17.0.10   minikube   &lt;none&gt;           &lt;none&gt;      &lt;======</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>IP address is POD property, not container&#x27;s.       </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl describe pod verybusy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name:         verybusy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Namespace:    default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Priority:     0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Node:         minikube/192.168.39.25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Start Time:   Fri, 23 Sep 2022 14:50:30 +1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Labels:       &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Annotations:  &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Status:       Running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IP:           172.17.0.10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IPs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  IP:  172.17.0.10     # &lt;==========</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  busy:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Container ID:  docker://995e596ca7c7953c21955db1506f724d57db17251440c397878efed8714a61a2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Image:         busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Image ID:      docker-pullable://busybox@sha256:ad9bd57a3a57cc95515c537b89aaa69d83a6df54c4050fcf2b41ad367bec0cd5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Port:          &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Host Port:     &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      3600</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    State:          Running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Started:      Fri, 23 Sep 2022 14:50:44 +1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Ready:          True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Restart Count:  0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Environment:    &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Mounts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /var/run/secrets/kubernetes.io/serviceaccount from default-token-vrnvj (ro)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  box:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Container ID:  docker://e1beec661f02024c461cb72bf8013661a781c8ae1d6d65c5e01936c3ab9e6d08</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Image:         busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Image ID:      docker-pullable://busybox@sha256:ad9bd57a3a57cc95515c537b89aaa69d83a6df54c4050fcf2b41ad367bec0cd5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Port:          &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Host Port:     &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      3600</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    State:          Running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Started:      Fri, 23 Sep 2022 14:50:50 +1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Ready:          True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Restart Count:  0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Environment:    &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Mounts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /var/run/secrets/kubernetes.io/serviceaccount from default-token-vrnvj (ro)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Conditions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type              Status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Initialized       True </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Ready             True </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ContainersReady   True </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PodScheduled      True </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default-token-vrnvj:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Type:        Secret (a volume populated by a Secret)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SecretName:  default-token-vrnvj</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Optional:    false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">QoS Class:       BestEffort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Node-Selectors:  &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Events:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type    Reason     Age    From               Message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ----    ------     ----   ----               -------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Scheduled  5m47s  default-scheduler  Successfully assigned default/verybusy to minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Pulling    5m41s  kubelet            Pulling image &quot;busybox&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Pulled     5m37s  kubelet            Successfully pulled image &quot;busybox&quot; in 4.068525177s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Created    5m35s  kubelet            Created container busy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Started    5m33s  kubelet            Started container busy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Pulling    5m33s  kubelet            Pulling image &quot;busybox&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Pulled     5m29s  kubelet            Successfully pulled image &quot;busybox&quot; in 3.699821125s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Created    5m27s  kubelet            Created container box</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Started    5m26s  kubelet            Started container box</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Log into containers and check ip address.<br>
<!-- -->Both container shows the same IP address.<br>
<!-- -->Note that conatiner is not a virtual machine but an application.       </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl exec -it verybusy -c busy /bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl exec [POD] [COMMAND] is DEPRECATED and will be removed in a future version. Use kubectl exec [POD] -- [COMMAND] instead.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/ # </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/ # ip a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">..</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2: sit0@NONE: &lt;NOARP&gt; mtu 1480 qdisc noop qlen 1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    link/sit 0.0.0.0 brd 0.0.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">60: eth0@if61: &lt;BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN&gt; mtu 1500 qdisc noqueue </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    link/ether 02:42:ac:11:00:0a brd ff:ff:ff:ff:ff:ff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inet 172.17.0.10/16 brd 172.17.255.255 scope global eth0     &lt;======</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       valid_lft forever preferred_lft forever</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/ # exit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl exec -it verybusy -c box /bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl exec [POD] [COMMAND] is DEPRECATED and will be removed in a future version. Use kubectl exec [POD] -- [COMMAND] instead.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/ # ip ad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2: sit0@NONE: &lt;NOARP&gt; mtu 1480 qdisc noop qlen 1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    link/sit 0.0.0.0 brd 0.0.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">60: eth0@if61: &lt;BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN&gt; mtu 1500 qdisc noqueue </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    link/ether 02:42:ac:11:00:0a brd ff:ff:ff:ff:ff:ff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inet 172.17.0.10/16 brd 172.17.255.255 scope global eth0     &lt;======</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       valid_lft forever preferred_lft forever</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>What if one conatiner wants to connect to other container ?<br>
<!-- -->It&#x27;s same as multiple application in a server using internal IP stack, IPC or port forwarding. K8s pos is not different.<br>
<!-- -->Pod is ultimate entity having an ip address.      </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="expose-a-deployment">Expose a deployment<a class="hash-link" href="#expose-a-deployment" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get svc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME         TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   125d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME           READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx      1/1     1            1           6d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lab5-nginx     4/4     4            4           105m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis          1/1     1            1           5d9h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rollingnginx   1/1     1            1           26h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl expose deployment rollingnginx --port=80 --target-port=80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/rollingnginx exposed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get svc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME           TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes     ClusterIP   10.96.0.1        &lt;none&gt;        443/TCP   125d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rollingnginx   ClusterIP   10.100.255.163   &lt;none&gt;        80/TCP    4s      &lt;=====</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl describe svc rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name:              rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Namespace:         default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Labels:            app=rollingnginx  &lt;==== service uses Label   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Annotations:       &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Selector:          app=rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type:              ClusterIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IP Families:       &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IP:                10.100.255.163    &lt;=====</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IPs:               10.100.255.163</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Port:              &lt;unset&gt;  80/TCP   &lt;======</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TargetPort:        80/TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Endpoints:         172.17.0.9:80     &lt;=====</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Session Affinity:  None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Events:            &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get pod -o wide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                            READY   STATUS    RESTARTS   AGE    IP            NODE       NOMINATED NODE   READINESS GATES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rollingnginx-785db9758d-p5k8v   1/1     Running   0          26h    172.17.0.9    minikube   &lt;none&gt;           &lt;none&gt;  &lt;====</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="scaling-the-deployment-will-add-ip-endpoints-as-pods-increases">Scaling the deployment will add IP Endpoints as PODs increases.<a class="hash-link" href="#scaling-the-deployment-will-add-ip-endpoints-as-pods-increases" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl describe svc rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name:              rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Namespace:         default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Labels:            app=rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Annotations:       &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Selector:          app=rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type:              ClusterIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IP Families:       &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IP:                10.100.255.163</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IPs:               10.100.255.163</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Port:              &lt;unset&gt;  80/TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TargetPort:        80/TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Endpoints:         172.17.0.12:80,172.17.0.16:80,172.17.0.17:80 + 1 more...     &lt;====</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Session Affinity:  None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Events:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type     Reason                        Age   From                       Message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ----     ------                        ----  ----                       -------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Warning  FailedToUpdateEndpointSlices  11s   endpoint-slice-controller  Error updating Endpoint Slices for Service default/rollingnginx: failed to update rollingnginx-5fgpm EndpointSlice for Service default/rollingnginx: Operation cannot be fulfilled on endpointslices.discovery.k8s.io &quot;rollingnginx-5fgpm&quot;: the object has been modified; please apply your changes to the latest version and try again</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get pod -o wide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                            READY   STATUS    RESTARTS   AGE     IP            NODE       NOMINATED NODE   READINESS GATES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rollingnginx-785db9758d-npzw7   1/1     Running   0          3m14s   172.17.0.12   minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rollingnginx-785db9758d-p5k8v   1/1     Running   0          26h     172.17.0.9    minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rollingnginx-785db9758d-szglg   1/1     Running   0          3m13s   172.17.0.17   minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rollingnginx-785db9758d-vpwc7   1/1     Running   0          3m13s   172.17.0.16   minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Working with yaml file,  it contains everything for service.<br>
<!-- -->Not much information.<br>
<code>Label</code> and <code>selector</code> is important.<br>
<!-- -->Services is not connect to an one deployment.    </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl expose deployment rollingnginx --port=80 --target-port=80 --dry-run -o yaml &gt; svc.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ cat svc.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  creationTimestamp: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labels:   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app: rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - port: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protocol: TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    targetPort: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selector: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    app: rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">status:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  loadBalancer: {}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-dns-in-k8s">Using DNS in k8s.<a class="hash-link" href="#using-dns-in-k8s" title="Direct link to heading">​</a></h4><p>K8s DNS service </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora work]$ kubectl get pods -n kube-system -o wide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                               READY   STATUS    RESTARTS   AGE    IP              NODE       NOMINATED NODE   READINESS GATES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">coredns-74ff55c5b-qgdjv            1/1     Running   3          125d   172.17.0.4      minikube   &lt;none&gt;           &lt;none&gt;        &lt;==========</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">etcd-minikube                      1/1     Running   35         125d   192.168.39.25   minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-apiserver-minikube            1/1     Running   83         125d   192.168.39.25   minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-controller-manager-minikube   1/1     Running   11         125d   192.168.39.25   minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-proxy-x48k4                   1/1     Running   3          125d   192.168.39.25   minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-scheduler-minikube            1/1     Running   3          125d   192.168.39.25   minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">storage-provisioner                1/1     Running   139        125d   192.168.39.25   minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora work]$ kubectl describe pod coredns-74ff55c5b-qgdjv -n kube-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name:                 coredns-74ff55c5b-qgdjv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Namespace:            kube-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Priority:             2000000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Priority Class Name:  system-cluster-critical</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Node:                 minikube/192.168.39.25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Start Time:           Sat, 21 May 2022 15:12:15 +1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Labels:               k8s-app=kube-dns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      pod-template-hash=74ff55c5b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Annotations:          &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Status:               Running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IP:                   172.17.0.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IPs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  IP:           172.17.0.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Controlled By:  ReplicaSet/coredns-74ff55c5b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  coredns:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Container ID:  docker://2f577513304ad5e32f49f69d054f26b5a9d9c0b595dce7741bca319b7817f486</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Image:         k8s.gcr.io/coredns:1.7.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Image ID:      docker-pullable://k8s.gcr.io/coredns@sha256:73ca82b4ce829766d4f1f10947c3a338888f876fbed0540dc849c89ff256e90c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Ports:         53/UDP, 53/TCP, 9153/TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Host Ports:    0/UDP, 0/TCP, 0/TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Args:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      -conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /etc/coredns/Corefile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    State:          Running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Started:      Sun, 18 Sep 2022 06:33:23 +1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Last State:     Terminated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Reason:       Error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Exit Code:    255</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Started:      Sat, 17 Sep 2022 12:10:25 +1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Finished:     Sun, 18 Sep 2022 06:28:42 +1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Ready:          True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Restart Count:  3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Limits:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      memory:  170Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Requests:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cpu:        100m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      memory:     70Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Liveness:     http-get http://:8080/health delay=60s timeout=5s period=10s #success=1 #failure=5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Readiness:    http-get http://:8181/ready delay=0s timeout=1s period=10s #success=1 #failure=3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Environment:  &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Mounts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /etc/coredns from config-volume (ro)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /var/run/secrets/kubernetes.io/serviceaccount from coredns-token-dwpds (ro)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Conditions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type              Status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Initialized       True </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Ready             True </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ContainersReady   True </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PodScheduled      True </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  config-volume:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Type:      ConfigMap (a volume populated by a ConfigMap)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name:      coredns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Optional:  false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  coredns-token-dwpds:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Type:        Secret (a volume populated by a Secret)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SecretName:  coredns-token-dwpds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Optional:    false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">QoS Class:       Burstable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Node-Selectors:  kubernetes.io/os=linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tolerations:     CriticalAddonsOnly op=Exists</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 node-role.kubernetes.io/control-plane:NoSchedule</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 node-role.kubernetes.io/master:NoSchedule</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Events:          &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="nslookup">nslookup<a class="hash-link" href="#nslookup" title="Direct link to heading">​</a></h4><p>Create a pod from where we can run <code>nslookup</code> command.    </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cat busybox.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - name: busy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;3600&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create -f busybox.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/busybox created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Check existing services</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get svc -o wide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME         TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE    SELECTOR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   125d   &lt;none&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>nslookup</code>      </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl exec -it busybox -- nslookup kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Server:     10.96.0.10    &lt;=== name server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Address:    10.96.0.10:53</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name:   kubernetes.default.svc.cluster.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Address: 10.96.0.1      &lt;=====</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*** Can&#x27;t find kubernetes.svc.cluster.local: No answer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*** Can&#x27;t find kubernetes.cluster.local: No answer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*** Can&#x27;t find kubernetes.default.svc.cluster.local: No answer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*** Can&#x27;t find kubernetes.svc.cluster.local: No answer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*** Can&#x27;t find kubernetes.cluster.local: No answer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>K8s automatically adds DNS configuration to pods.     </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl exec -it busybox -- cat /etc/resolv.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nameserver 10.96.0.10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">search default.svc.cluster.local svc.cluster.local cluster.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">options ndots:5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example from an OCP.    </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">root@bastion ~]# kubectl exec -it c-db2oltp-1655862364134421-db2u-0 cat /etc/resolv.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl exec [POD] [COMMAND] is DEPRECATED and will be removed in a future version. Use kubectl exec [POD] -- [COMMAND] instead.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">search sandy.svc.cluster.local svc.cluster.local cluster.local js.ocp.adl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nameserver 136.32.0.10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">options ndots:2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ingress">Ingress<a class="hash-link" href="#ingress" title="Direct link to heading">​</a></h4><ul><li>HTTP/HTTPS</li><li>Services get externally reachable URLs</li><li>can load balance</li><li>can take care of TLS/SSL termination.   </li><li>Needs an Ingress Controller to do the work.     </li></ul><blockquote><p>Other services types are exposed using the <code>NodePort</code> or <code>LoadBalancer</code> Service type.     </p></blockquote><p>Enable ingress.   </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ minikube addons list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-----------------------------|----------|--------------|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|         ADDON NAME          | PROFILE  |    STATUS    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-----------------------------|----------|--------------|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ambassador                  | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| auto-pause                  | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| csi-hostpath-driver         | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| dashboard                   | minikube | enabled ✅   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| default-storageclass        | minikube | enabled ✅   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| efk                         | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| freshpod                    | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| gcp-auth                    | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| gvisor                      | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| helm-tiller                 | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ingress                     | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ingress-dns                 | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| istio                       | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| istio-provisioner           | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| kubevirt                    | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| logviewer                   | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| metallb                     | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| metrics-server              | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| nvidia-driver-installer     | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| nvidia-gpu-device-plugin    | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| olm                         | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| pod-security-policy         | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| registry                    | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| registry-aliases            | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| registry-creds              | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| storage-provisioner         | minikube | enabled ✅   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| storage-provisioner-gluster | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| volumesnapshots             | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-----------------------------|----------|--------------|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ minikube addons enable ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Using image k8s.gcr.io/ingress-nginx/controller:v0.44.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Using image docker.io/jettech/kube-webhook-certgen:v1.5.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Using image docker.io/jettech/kube-webhook-certgen:v1.5.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Verifying ingress addon...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* The &#x27;ingress&#x27; addon is enabled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ minikube addons enable ingress-dns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Using image cryptexlabs/minikube-ingress-dns:0.3.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* The &#x27;ingress-dns&#x27; addon is enabled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ minikube addons list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-----------------------------|----------|--------------|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|         ADDON NAME          | PROFILE  |    STATUS    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-----------------------------|----------|--------------|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ambassador                  | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| auto-pause                  | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| csi-hostpath-driver         | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| dashboard                   | minikube | enabled ✅   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| default-storageclass        | minikube | enabled ✅   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| efk                         | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| freshpod                    | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| gcp-auth                    | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| gvisor                      | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| helm-tiller                 | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ingress                     | minikube | enabled ✅   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ingress-dns                 | minikube | enabled ✅   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| istio                       | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| istio-provisioner           | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| kubevirt                    | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| logviewer                   | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| metallb                     | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| metrics-server              | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| nvidia-driver-installer     | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| nvidia-gpu-device-plugin    | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| olm                         | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| pod-security-policy         | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| registry                    | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| registry-aliases            | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| registry-creds              | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| storage-provisioner         | minikube | enabled ✅   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| storage-provisioner-gluster | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| volumesnapshots             | minikube | disabled     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-----------------------------|----------|--------------|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create ingress controller.     </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cat nginx-in2.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: extensions/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: nginx-ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  annotations:     ## comment filed </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ingress.kubernetes.io/rewrite-target: /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rules:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - host:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      paths:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - path: /nginxserver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        backend:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          serviceName: nginx-dash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          servicePort: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl create -f nginx-in2.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Warning: extensions/v1beta1 Ingress is deprecated in v1.14+, unavailable in v1.22+; use networking.k8s.io/v1 Ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ingress.extensions/nginx-ingress created</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Normal Ingress example.  </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cat ingress-virtual-hosting.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: networking.k8s.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: name-virtual-host-ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rules:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - host: first.bar.com     ## &lt;=== DNS should know about this     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      paths:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - backend:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          serviceName: service1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          servicePort: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - host: second.foo.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      paths:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - backend:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          serviceName: service2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          servicePort: 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - http:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      paths:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - backend: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          serviceName: service3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          servicePort: 80</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="lab-6-exposing-pods">Lab 6 Exposing Pods<a class="hash-link" href="#lab-6-exposing-pods" title="Direct link to heading">​</a></h4><p>Create a pod.   </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cat lab6_nginx_pod.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: lab6-nginx-pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl create -f lab6_nginx_pod.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/lab6-nginx-pod created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pods -o wide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                            READY   STATUS    RESTARTS   AGE     IP            NODE       NOMINATED NODE   READINESS GATES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">busybox                         1/1     Running   6          6h5m    172.17.0.9    minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx-57bb5f6747-hznc7      1/1     Running   1          7d1h    172.17.0.5    minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx-57bb5f6747-kmkjr      1/1     Running   1          7d      172.17.0.3    minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lab5-nginx-7777d7964c-rkfz2     1/1     Running   0          26h     172.17.0.14   minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lab5-nginx-7777d7964c-v9kn6     1/1     Running   0          26h     172.17.0.15   minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lab6-nginx-pod                  1/1     Running   0          3m27s   172.17.0.13   minikube   &lt;none&gt;           &lt;none&gt;     &lt;========</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis-6fb5b985bc-s6gpq          1/1     Running   0          6d9h    172.17.0.8    minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rollingnginx-7dbfcbddb7-rb5wk   1/1     Running   0          23h     172.17.0.12   minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">verybusy                        2/2     Running   50         25h     172.17.0.10   minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>expose failure due to no label on the pod. </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl expose pod lab6-nginx-pod --type=NodePort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error: couldn&#x27;t retrieve selectors via --selector flag or introspection: the pod has no labels and cannot be exposed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">See &#x27;kubectl expose -h&#x27; for help and examples</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create again adding labels   </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cat lab6_nginx_pod.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: lab6-nginx-pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  labels:     ## added</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: lab6-nginx-pod   ## added</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create -f lab6_nginx_pod.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/lab6-nginx-pod created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get pods -o wide</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                            READY   STATUS    RESTARTS   AGE     IP            NODE       NOMINATED NODE   READINESS GATES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lab6-nginx-pod                  1/1     Running   0          29s     172.17.0.13   minikube   &lt;none&gt;           &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pods --show-labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                            READY   STATUS    RESTARTS   AGE     LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lab6-nginx-pod                  1/1     Running   0          2m9s    name=lab6-nginx-pod    &lt;======================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Expose again    </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl expose pod lab6-nginx-pod --type=NodePort --port=8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/lab6-nginx-pod exposed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl describe service lab6-nginx-pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name:                     lab6-nginx-pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Namespace:                default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Labels:                   name=lab6-nginx-pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Annotations:              &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Selector:                 name=lab6-nginx-pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type:                     NodePort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IP Families:              &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IP:                       10.100.194.64   =&gt; (?) what&#x27;s this IP ? CLUSTER-IP </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IPs:                      10.100.194.64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Port:                     &lt;unset&gt;  8080/TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TargetPort:               8080/TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NodePort:                 &lt;unset&gt;  30390/TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Endpoints:                172.17.0.13:8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Session Affinity:         None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">External Traffic Policy:  Cluster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Events:                   &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get svc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME             TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lab6-nginx-pod   NodePort    10.100.194.64   &lt;none&gt;        8080:30390/TCP   6m7s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="07-managing-pod-volumes">07 Managing Pod Volumes<a class="hash-link" href="#07-managing-pod-volumes" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="managing-pod-volumes">Managing Pod Volumes<a class="hash-link" href="#managing-pod-volumes" title="Direct link to heading">​</a></h4><p>Create a pod using <code>emptyDir</code> type volumne.<br>
<!-- -->That is temporary during pods&#x27;s life time. See <code>kubectl explain pod.spec.volumes</code>.      </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cat volumes.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vol2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> centos2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> centos</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3600&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">restartPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">emptyDir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create -f volumes.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/vol2 created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME   READY   STATUS              RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vol2   0/1     ContainerCreating   0          58s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME   READY   STATUS              RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vol2   0/1     ContainerCreating   0          67s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME   READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vol2   1/1     Running   0          2m16s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It created volume <code>test</code> with <code>emptyDir</code> type and mount it as <code>/test</code> new pod with <code>emptyDir</code> type.       </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl describe pod vol2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name:         vol2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Namespace:    default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Priority:     0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Node:         minikube/192.168.39.25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Start Time:   Sat, 08 Oct 2022 16:50:50 +1100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Labels:       &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Annotations:  &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Status:       Running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IP:           172.17.0.6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IPs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  IP:  172.17.0.6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  centos2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Container ID:  docker://1e6aba5fa4cf0a6f1f1f05a613b7ca98d548e37d106c01b13ac613c45d20da24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Image:         centos:7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Image ID:      docker-pullable://centos@sha256:c73f515d06b0fa07bb18d8202035e739a494ce760aa73129f60f4bf2bd22b407</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Port:          &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Host Port:     &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      3600</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    State:          Running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Started:      Sat, 08 Oct 2022 16:52:04 +1100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Ready:          True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Restart Count:  0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Environment:    &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Mounts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /test from test (rw)     &lt;=====</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /var/run/secrets/kubernetes.io/serviceaccount from default-token-hfn84 (ro)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Conditions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type              Status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Initialized       True </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Ready             True </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ContainersReady   True </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PodScheduled      True </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  test:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Type:       EmptyDir (a temporary directory that shares a pod&#x27;s lifetime)         &lt;=======</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Medium:     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SizeLimit:  &lt;unset&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default-token-hfn84:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Type:        Secret (a volume populated by a Secret)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SecretName:  default-token-hfn84</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Optional:    false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">QoS Class:       BestEffort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Node-Selectors:  &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Events:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type    Reason     Age    From               Message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ----    ------     ----   ----               -------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Scheduled  2m51s  default-scheduler  Successfully assigned default/vol2 to minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Pulling    2m43s  kubelet            Pulling image &quot;centos:7&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Pulled     103s   kubelet            Successfully pulled image &quot;centos:7&quot; in 1m0.434691784s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Created    99s    kubelet            Created container centos2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Started    97s    kubelet            Started container centos2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create a test file into the pod.   </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl exec -it vol2 touch /test/testfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl exec [POD] [COMMAND] is DEPRECATED and will be removed in a future version. Use kubectl exec [POD] -- [COMMAND] instead.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl exec -it vol2 -- ls -l /test/testfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-rw-r--r-- 1 root root 0 Oct  8 05:56 /test/testfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl exec -it vol2 -- df -h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem      Size  Used Avail Use% Mounted on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.1G   13G  20% /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs            64M     0   64M   0% /dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs           2.0G     0  2.0G   0% /sys/fs/cgroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/vda1        17G  3.1G   13G  20% /test       &lt;=======</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shm              64M     0   64M   0% /dev/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs           2.0G   12K  2.0G   1% /run/secrets/kubernetes.io/serviceaccount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs           2.0G     0  2.0G   0% /proc/acpi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs           2.0G     0  2.0G   0% /proc/scsi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs           2.0G     0  2.0G   0% /sys/firmware</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Another example sharing a volume between containers.     </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ cat morevolumes2.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> morevol2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> centos1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> centos</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3600&quot;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /centos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> centos2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> centos</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3600&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /centos2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">emptyDir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">f morevolumes2.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/morevol2 created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl exec </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">it morevol2 </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">c centos1 </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> touch /centos/testfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl exec </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">it morevol2 </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">c centos2 </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ls </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">l /centos2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">total 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">rw</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">r</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">r</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 1 root root 0 Oct  8 06</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">11 testfile</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-persistent-volumes">Using persistent volumes<a class="hash-link" href="#using-persistent-volumes" title="Direct link to heading">​</a></h4><ul><li><p>Pod volumes depend on Pods</p></li><li><p>To have storage outlast a pod, the volume should connect to external storage    </p></li><li><p>This can be done from within the pod, but that would require the developer to know about storage specifics</p></li><li><p>To decouple storage requirements from Pod deployment, Persistent Volumes are offered.   </p></li><li><p><code>PVC(PersistentVolumeClain)</code> is used by the user to claim storage in a declaritive way, without worrying about storage specifics.     </p></li><li><p>PVC is a k8s API object that has a spec that defines required storage properties.     </p></li><li><p>Based on properties, PVC will reach out to a PV to bind to specific storage     </p></li><li><p>PV is independent to pod.   &lt;===&gt;  PVC &lt;===&gt; Pod (has PVC to access to PV)    </p></li><li><p>PV and PVC has no direct relation.  Those are bound dynamically when necessary.           </p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-pods-to-use-pvs">Setting up Pods to use PVs<a class="hash-link" href="#setting-up-pods-to-use-pvs" title="Direct link to heading">​</a></h4><p>Create a path to user in k8s host.    </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ minikube ssh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         _             _</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            _         _ ( )           ( )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ___ ___  (_)  ___  (_)| |/&#x27;)  _   _ | |_      __</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/&#x27; _ ` _ `\| |/&#x27; _ `\| || , &lt;  ( ) ( )| &#x27;_`\  /&#x27;__`\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| ( ) ( ) || || ( ) || || |\`\ | (_) || |_) )(  ___/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(_) (_) (_)(_)(_) (_)(_)(_) (_)`\___/&#x27;(_,__/&#x27;`\____)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ df -h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem      Size  Used Avail Use% Mounted on</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs           3.5G  679M  2.8G  20% /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">devtmpfs        1.9G     0  1.9G   0% /dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs           2.0G     0  2.0G   0% /dev/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs           2.0G   10M  2.0G   1% /run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs           2.0G     0  2.0G   0% /sys/fs/cgroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmpfs           2.0G  8.0K  2.0G   1% /tmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/vda1        17G  3.0G   13G  19% /mnt/vda1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/3804902e40974da784873de8cc87f9663936835fd66342e7d478acb258b57ab5/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/a9d3476fcbcadcf74f5fe1357fe7d650125359ccd051ec10dcfaa7271cd3c91e/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/218a54e89da72c4cd542ff0642d2925ce9588eddb66539ca7b64d96c6541a527/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shm              64M     0   64M   0% /var/lib/docker/containers/11bca17f331e7eac01f2688d539ab7bde4dd2ea1837a581b7a3c96608814a23d/mounts/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/9319c2770817c906dc6c34abcf70cf23a942de54d92496207b9f0e7cbecff392/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shm              64M     0   64M   0% /var/lib/docker/containers/bf7004c93c9e9004f814c8861136e3d45356aa7e5444aa567533d1ce8ce3b494/mounts/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shm              64M     0   64M   0% /var/lib/docker/containers/67274633884f3a7147b4d28902458934c79be094de9aaea988dca4d9bd455265/mounts/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shm              64M     0   64M   0% /var/lib/docker/containers/2cd313fc6db7274f3655b2a9ecb13e9ee6e9e3ed109d0297c8f8dcc572db9c7d/mounts/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/012b4b7b290bada7137b958631b82b3b363aedddf9d166acf7b8564f3e1f2980/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/68a47b0ea0762377dd7041d333a3fd24fd8b69d9905f58369d16af4fa834d822/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/a296b3f42291056f21dd01324318b6e0ea977ad642104b0d21c12a3bd98fac24/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/afbbc4dc554f04b2c397cdaa234eaa77e5ffe7d1a8137bec1e0c1e589016c3a5/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/530e131a26910f86adde91225019a65769fa5f65851655bfadafe9ab75e2b165/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/d7c775c6eeb2c235b4ec0e398ce88c7f99792e7e5b5ac19dd9c05d50f6ca6661/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/95a6e5438ccebe4a9c70b7a50e000d3d7fe4ba6542a0a2399d77e767320586e5/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/aae81a3b3a0aed9abd14b7beb324ad88370f8b18aed2f7b354687a0d308a1913/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/18766dfec9ef14802cad3dbda57e88265247e7e2f90ed05751a4bdbe2f053ba8/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/1237087f2076189f2dc657de8a33525e96c570d04a2b2cb0b9fcd15ba7941542/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/5a41bfe3d52ef14b86163ead4da4ea57e98d47c1c76c8dcb90f8344e3e59fd05/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shm              64M     0   64M   0% /var/lib/docker/containers/6e0e72b562ce43064e1af0dab240b768e2f43adf1f56795ed8b6bc08ac246778/mounts/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shm              64M     0   64M   0% /var/lib/docker/containers/56a46268fffea50b0a95fd6d444a38423fc6ce98b466fada4cf38dd4621f956b/mounts/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shm              64M     0   64M   0% /var/lib/docker/containers/10171e7249f1fae755595aceed007b88ded4ecb0469954b098473f28f0b776b0/mounts/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/a78e8fb8cd113c658c91f3d23d573c16d35a167cf1374864f080952ffb404c42/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shm              64M     0   64M   0% /var/lib/docker/containers/58b20b522446c622e78ec329671216e6356c5036bf540548338453444b1e2e55/mounts/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/f8c0f947209c52ee12bcbd366841af3a4a2163bf85905e124a8ed5e0ca09bf5c/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shm              64M     0   64M   0% /var/lib/docker/containers/61286fe3865cff187090c9d74943bf56e42893a999a24afec52e969b845a914e/mounts/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shm              64M     0   64M   0% /var/lib/docker/containers/62924c3743876e98a57b6062d2d00b73143368cdb48e7c892243eaffca2abb92/mounts/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shm              64M     0   64M   0% /var/lib/docker/containers/75bab8180811c4a5a52ca65afba3c12b9f45f9716c1851acb2baba7b987de04c/mounts/shm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/c41c288dc1cf61e622d42c60c7f4cffc936eafaeaf39b8095579ffbb27582560/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/03b099b772e9a08a19ac1cf19a919d7e428ed12737b011f4c28fe56fdcfe4dfb/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/2f80e54cd2fe733cf310e7a74be04b8fa5081d1508812c16943e8077460f1a77/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/1f2f9062c9e540c0d23f16cb6a85aaf8595e2b86f8aed0166f2a2096db7fde47/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">overlay          17G  3.0G   13G  19% /var/lib/docker/overlay2/ac2edc3273ed3c914b6e6a20328b19e521773564b896f096906b14368ee07eb0/merged</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ sudo mkdir /mydata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ exit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create a PV   </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ cat pv.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PersistentVolume</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">volume</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">capacity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">storage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 2Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">accessModes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ReadWriteOnce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">hostPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/mydata&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ kubectl create </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">f pv.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">persistentvolume/pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">volume created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get pv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM   STORAGECLASS   REASON   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">volume   2Gi        RWO            Retain           Available                                   103s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create a PVC.<br>
<strong>It is going to look for any PV with the same accessMode</strong> , here <code>ReadWriteOnce</code> and bind.    </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ cat pvc.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PersistentVolumeClaim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">claim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">accessModes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ReadWriteOnce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">storage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 1Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ kubectl create </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">f pvc.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">persistentvolumeclaim/pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">claim created</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>PVC is bound to a volume name <code>pvc-xxx</code> and that is added checking with <code>kubectl get pv</code>.     </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get pvc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME       STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pv-claim   Bound    pvc-d54a5923-e241-43cc-b224-b7725d3b8c01   1Gi        RWO            standard       113s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get pv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                       CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM              STORAGECLASS   REASON   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pv-volume                                  2Gi        RWO            Retain           Available                                              6m57s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pvc-d54a5923-e241-43cc-b224-b7725d3b8c01   1Gi        RWO            Delete           Bound       default/pv-claim   standard                115s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After the pod creation using the pvc, the mount is available.      </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ cat pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">persistentVolumeClaim</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">claimName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">claim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http-server&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/usr/share/nginx/html&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ kubectl create </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">f pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ kubectl get pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME     READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod   1/1     Running   0          102s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ kubectl describe pod pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">         pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Priority</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Node</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">         minikube/192.168.39.25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Start Time</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">   Sat</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 22 Oct 2022 14</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">03</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">52 +1100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       &lt;none</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  &lt;none</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       Running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">IP</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">           172.17.0.6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">IPs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">IP</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  172.17.0.6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pv-container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Container ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">   docker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//08efa2953f164c4a2271b52f8c7331fff37cf4aac6690ccd8ff3467908e159de</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">          nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Image ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       docker</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pullable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//nginx@sha256</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">5ffb682b98b0362b66754387e86b0cd31a5cb7123e49e7f6f6617690900d20b2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">           80/TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Host Port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">      0/TCP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">State</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">          Running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">Started</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">      Sat</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 22 Oct 2022 14</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">05</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">10 +1100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Ready</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">          </span><span class="token boolean important" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Restart Count</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    &lt;none</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Mounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /usr/share/nginx/html from pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">storage (rw)      &lt;=========</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /var/run/secrets/kubernetes.io/serviceaccount from default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">d6tbm (ro)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Conditions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type              Status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Initialized       True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Ready             True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ContainersReady   True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PodScheduled      True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pv-storage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)     &lt;=====</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ClaimName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">claim   &lt;========</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ReadOnly</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">   </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">default-token-d6tbm</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">        Secret (a volume populated by a Secret)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">SecretName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">d6tbm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Optional</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">QoS Class</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       BestEffort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Node-Selectors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  &lt;none</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Tolerations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">     node.kubernetes.io/not</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ready</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">NoExecute op=Exists for 300s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 node.kubernetes.io/unreachable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">NoExecute op=Exists for 300s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Events</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type    Reason     Age   From               Message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">               </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Scheduled  115s  default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler  Successfully assigned default/pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod to minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Pulling    103s  kubelet            Pulling image &quot;nginx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Pulled     59s   kubelet            Successfully pulled image &quot;nginx&quot; in 44.215800653s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Created    41s   kubelet            Created container pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Started    35s   kubelet            Started container pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Above example is not realistic as we don&#x27;t put a storage to a specific host only.<br>
<!-- -->Here are example using a NFS mount path.    </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ cat nfs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pv.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PersistentVolume</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nfs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">capacity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">storage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 2Gi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">accessModes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ReadWriteMany</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">persistentVolumeReclaimPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Retain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nfs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 192.168.99.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">readOnly</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ cat nfs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pvc.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PersistentVolumeClaim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nfs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">claim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">accessModes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ReadWriteMany</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">storage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 100Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ cat nfs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nfs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nfs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">persistentVolumeClaim</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">claimName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nfs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pv</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">claim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nfs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">client1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> centos</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3600&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/nfsshare&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nfs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nfs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">client2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> centos</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3600&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/nfsshare&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nfs</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="dynamic-provisioning">Dynamic provisioning<a class="hash-link" href="#dynamic-provisioning" title="Direct link to heading">​</a></h4><ul><li>PVs can be created manually or dynamically provisioned.   </li><li>To dynamically provision a PV, a StrageClass must be referred to in the PVC     </li><li>Storage classes are using classes that are defined by the administrator    </li><li>Storage classes are also using provisioners that connect to a specific storage type    </li><li>A default storage class can be used, alternatively storage classes can be defined manually       </li><li>A default StorageClass can be used to always specify a storage type so that it doesn&#x27;t have to be defined in the PVC spec anymore.   </li><li>You&#x27;ll find Default StorageClasses in specific Managed K8s environment, such as AKS.         </li><li>Custom StorageClass is used to define a StorageClass resource that binds to specific storage.     </li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-configmaps">Using ConfigMaps<a class="hash-link" href="#using-configmaps" title="Direct link to heading">​</a></h4><ul><li>Separate configuration from code</li><li>ConfigMaps are clear-text, Secrets are base64 encoded</li><li>Different types can be used : Files, Directories, Literals  </li><li>No matter which type is used, all the associated data is stored in the ConfigMap or Secret object</li><li>Secrets are mainly used to push variables.    </li></ul><p>Create a ConfigMap.   </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ cat nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">custom</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen       8888;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server_name  localhost;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location / </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        root   /usr/share/nginx/html;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        index  index.html index.htm;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ kubectl create cm nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cm </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">from</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">file nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">custom</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">configmap/nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cm created</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In <code>data</code> section, the content is available.    </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ kubectl get cm nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cm </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">o yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nginx-custom-config.conf</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        listen       8888;</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        server_name  localhost;</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        location / {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            root   /usr/share/nginx/html;</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            index  index.html index.htm;</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">creationTimestamp</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-10-22T03:41:32Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resourceVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;62148&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">uid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> fba3b2f1</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">b659</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">4284</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">bc2a</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">0ddad88e2fc2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create a pod using the ConfigMap.<br>
<!-- -->It is mounted as volumes.<br>
<!-- -->It mounts the path <code>/etc/nginx/conf.d</code> with <code>conf</code> volume and create <code>default.conf</code> file under the path using the content of the ConfigMap <code>nginx-custom-config.conf</code>.     </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ cat nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cm.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">role</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /etc/nginx/conf.d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">configMap</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">items</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nginx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">custom</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default.conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl create -f nginx-cm.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/nginx-cm created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl exec -it nginx-cm -- cat /etc/nginx/conf.d/default.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen       8888;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server_name  localhost;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location / {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        root   /usr/share/nginx/html;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        index  index.html index.htm;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-secret">Using Secret<a class="hash-link" href="#using-secret" title="Direct link to heading">​</a></h4><ul><li><p>K8s automatically creates Secrets that contains credentials for accessing the API, and automatically modifies the Pods to use this type of Secret   </p></li><li><p><code>kubectl describe pod &lt;podname&gt;</code> and look for the mount section to see them.   </p></li><li><p>While creating a secret, the next value must be base64 encoded</p></li><li><p>You can create a secret. When using <code>kubectl create secret</code> this is happening automatically.      </p></li><li><p>From Pods, Secrets are used in the way that ConfigMaps are used.   </p></li><li><p>Mounted as volumes  </p></li><li><p>Imported as variables.    </p></li></ul><p>Create a secret.    </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl create secret generic secretstuff --from-literal=password=password --from-literal=user=linda</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">secret/secretstuff created</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The information is encoded.    </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get secret secretstuff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME          TYPE     DATA   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">secretstuff   Opaque   2      11m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get secret secretstuff -o yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  password: cGFzc3dvcmQ=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  user: bGluZGE=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  creationTimestamp: &quot;2022-10-22T04:20:07Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: secretstuff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resourceVersion: &quot;64064&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  uid: e88c872d-f0c4-4768-9155-f654b9c5b6dd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type: Opaque</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create a pod using the secret.   </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ cat pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">secret.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> secretbox2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> secretbox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3600&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /secretstuff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">secret</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">secretName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> secretstuff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ kubectl create </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">f pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">secret.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/secretbox2 created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ kubectl describe pod secretbox2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">         secretbox2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Priority</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Node</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">         minikube/192.168.39.25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Start Time</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">   Sat</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 22 Oct 2022 15</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">39</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">39 +1100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       &lt;none</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  &lt;none</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       Running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">IP</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">           172.17.0.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">IPs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">IP</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  172.17.0.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">secretbox</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Container ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  docker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//0151e632b9a8a44e002ee5757a8dbfd7ecd46b32b96b702c9ff92fbd4a23a158</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">         busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Image ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">      docker</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pullable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//busybox@sha256</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">9810966b5f712084ea05bf28fc8ba2c8fb110baa2531a10e2da52c1efc504698</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">          &lt;none</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Host Port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">     &lt;none</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      3600</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">State</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">          Running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">Started</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">      Sat</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 22 Oct 2022 15</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">40</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">14 +1100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Ready</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">          </span><span class="token boolean important" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Restart Count</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    &lt;none</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Mounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /secretstuff from secret (rw)       &lt;=====</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /var/run/secrets/kubernetes.io/serviceaccount from default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">d6tbm (ro)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Conditions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type              Status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Initialized       True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Ready             True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ContainersReady   True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PodScheduled      True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">secret</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">        Secret (a volume populated by a Secret)    &lt;=====</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">SecretName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  secretstuff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Optional</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">default-token-d6tbm</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">        Secret (a volume populated by a Secret)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">SecretName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">d6tbm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Optional</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">QoS Class</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       BestEffort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Node-Selectors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  &lt;none</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Tolerations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">     node.kubernetes.io/not</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ready</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">NoExecute op=Exists for 300s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 node.kubernetes.io/unreachable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">NoExecute op=Exists for 300s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Events</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type    Reason     Age   From               Message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">               </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Scheduled  2m1s  default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler  Successfully assigned default/secretbox2 to minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Pulling    109s  kubelet            Pulling image &quot;busybox&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Pulled     95s   kubelet            Successfully pulled image &quot;busybox&quot; in 13.683200681s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Created    89s   kubelet            Created container secretbox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Started    86s   kubelet            Started container secretbox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ kubectl get pod secretbox2 </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">o yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">creationTimestamp</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-10-22T04:39:39Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> secretbox2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resourceVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;65060&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">uid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 23afef33</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">efab</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">450a</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ab2a</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">6824672106b0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3600&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> secretbox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /dev/termination</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /secretstuff      &lt;=====</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /var/run/secrets/kubernetes.io/serviceaccount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">d6tbm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">readOnly</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">dnsPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterFirst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">enableServiceLinks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nodeName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">preemptionPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PreemptLowerPriority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">priority</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">restartPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">schedulerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">securityContext</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">serviceAccount</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">serviceAccountName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">terminationGracePeriodSeconds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tolerations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">effect</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NoExecute</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> node.kubernetes.io/not</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">operator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Exists</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">tolerationSeconds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">effect</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NoExecute</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> node.kubernetes.io/unreachable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">operator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Exists</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">tolerationSeconds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> secret      &lt;======</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">secret</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">defaultMode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">420</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">secretName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> secretstuff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">d6tbm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">secret</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">defaultMode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">420</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">secretName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">d6tbm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">conditions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">lastProbeTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lastTransitionTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-10-22T04:39:39Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;True&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Initialized</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">lastProbeTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lastTransitionTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-10-22T04:40:14Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;True&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">lastProbeTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lastTransitionTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-10-22T04:40:14Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;True&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ContainersReady</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">lastProbeTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lastTransitionTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-10-22T04:39:39Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;True&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PodScheduled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containerStatuses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> docker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//0151e632b9a8a44e002ee5757a8dbfd7ecd46b32b96b702c9ff92fbd4a23a158</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imageID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> docker</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pullable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//busybox@sha256</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">9810966b5f712084ea05bf28fc8ba2c8fb110baa2531a10e2da52c1efc504698</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lastState</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> secretbox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ready</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restartCount</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">started</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">state</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">running</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">startedAt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-10-22T04:40:14Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">hostIP</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 192.168.39.25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">phase</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Running</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">podIP</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 172.17.0.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">podIPs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">ip</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 172.17.0.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">qosClass</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BestEffort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">startTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-10-22T04:39:39Z&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Check the file inside of the pod.<br>
<!-- -->Once deployed, the value is shown as plain text.     </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl exec -it secretbox2 -- /bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/ # cat /secretstuff/password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">password/ #</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/ # cat /secretstuff/user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">linda/ #</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Another example using environment variable</strong>  </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ kubectl create secret generic mysql </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">from</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">literal=password=root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">secret/mysql created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ kubectl get secrets mysql </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">o yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cm9vdA==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">creationTimestamp</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-10-22T05:33:48Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resourceVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;67694&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">uid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 85635175</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">793d</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">43d6</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">8f98</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">d228a5ec4d4d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Opaque</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ kubectl explain pod.spec.containers.env.valueFrom</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">KIND</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">     Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">VERSION</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">RESOURCE</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> valueFrom &lt;Object</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">DESCRIPTION</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Source for the environment variable&#x27;s value. Cannot be used if value is not</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     empty.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     EnvVarSource represents a source for the value of an EnvVar.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">FIELDS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   configMapKeyRef  &lt;Object</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Selects a key of a ConfigMap.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   fieldRef &lt;Object</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token key atrule" style="color:#00a4db">Selects a field of the pod</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> supports metadata.name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> metadata.namespace</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     `metadata.labels</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;&lt;KEY&gt;&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> `metadata.annotations</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;&lt;KEY&gt;&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> spec.nodeName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     spec.serviceAccountName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> status.hostIP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> status.podIP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> status.podIPs.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   resourceFieldRef &lt;Object</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token key atrule" style="color:#00a4db">Selects a resource of the container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> only resources limits and requests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     (limits.cpu</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> limits.memory</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> limits.ephemeral</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">storage</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> requests.cpu</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     requests.memory and requests.ephemeral</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">storage) are currently supported.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   secretKeyRef &lt;Object</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Selects a key of a secret in the pod&#x27;s namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ cat pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">secret</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">as</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">var.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mymysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> MYSQL_ROOT_PASSWORD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">valueFrom</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">secretKeyRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ kubectl create </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">f pod</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">secret</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">as</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">var.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/mymysql created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ kubectl describe pod mymysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">         mymysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Priority</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Node</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">         minikube/192.168.39.25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Start Time</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">   Sat</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 22 Oct 2022 16</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">37</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">21 +1100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       &lt;none</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  &lt;none</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       Pending</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">IP</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">IPs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">          &lt;none</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Container ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">          mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Image ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">           &lt;none</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Host Port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">      &lt;none</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">State</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">          Waiting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">Reason</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       ContainerCreating</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Ready</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">          </span><span class="token boolean important" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Restart Count</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">MYSQL_ROOT_PASSWORD</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">&lt;set to the key &#x27;password&#x27; in secret &#x27;mysql&#x27;&gt;  Optional</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Mounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      /var/run/secrets/kubernetes.io/serviceaccount from default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">d6tbm (ro)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Conditions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type              Status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Initialized       True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Ready             False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ContainersReady   False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PodScheduled      True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">default-token-d6tbm</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">        Secret (a volume populated by a Secret)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">SecretName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">d6tbm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">Optional</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">QoS Class</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       BestEffort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Node-Selectors</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  &lt;none</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Tolerations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">     node.kubernetes.io/not</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ready</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">NoExecute op=Exists for 300s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 node.kubernetes.io/unreachable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">NoExecute op=Exists for 300s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">Events</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type    Reason     Age   From               Message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">               </span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">---</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Scheduled  90s   default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler  Successfully assigned default/mymysql to minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  Pulling    76s   kubelet            Pulling image &quot;mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ kubectl get pod mymysql </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">o yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">creationTimestamp</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-10-22T05:37:21Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mymysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resourceVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;67874&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">uid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ea09c906</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">4347</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">4eb7</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">a617</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">837c34ffb530</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> MYSQL_ROOT_PASSWORD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">valueFrom</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">secretKeyRef</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imagePullPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /dev/termination</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">terminationMessagePolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /var/run/secrets/kubernetes.io/serviceaccount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">d6tbm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">readOnly</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">dnsPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ClusterFirst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">enableServiceLinks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nodeName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">preemptionPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PreemptLowerPriority</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">priority</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">restartPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">schedulerName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">securityContext</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">serviceAccount</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">serviceAccountName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">terminationGracePeriodSeconds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">tolerations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">effect</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NoExecute</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> node.kubernetes.io/not</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">operator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Exists</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">tolerationSeconds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">effect</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NoExecute</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> node.kubernetes.io/unreachable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">operator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Exists</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">tolerationSeconds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">d6tbm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">secret</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">defaultMode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">420</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">secretName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">d6tbm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">conditions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">lastProbeTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lastTransitionTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-10-22T05:37:21Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;True&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Initialized</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">lastProbeTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lastTransitionTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-10-22T05:37:21Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">message</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;containers with unready status: [mysql]&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">reason</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ContainersNotReady</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;False&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Ready</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">lastProbeTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lastTransitionTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-10-22T05:37:21Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">message</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;containers with unready status: [mysql]&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">reason</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ContainersNotReady</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;False&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ContainersReady</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">lastProbeTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lastTransitionTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-10-22T05:37:21Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;True&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PodScheduled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containerStatuses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">imageID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">lastState</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ready</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restartCount</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">started</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">state</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">waiting</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">reason</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ContainerCreating</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">hostIP</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 192.168.39.25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">phase</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pending</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">qosClass</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> BestEffort</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">startTime</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-10-22T05:37:21Z&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Environment variable is set in the pod.    </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl exec -it mymysql -- /bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bash-4.4# env |grep MYSQL_ROOT_PASSWORD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MYSQL_ROOT_PASSWORD=root</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><a href="#Contents">Go to content</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="test2">test2<a class="hash-link" href="#test2" title="Direct link to heading">​</a></h2><p><a href="#Contents">Go to content</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/docs/minikube.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/cloud/docs/linux/linux_perf"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Performance</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cloud/docs/openshift/oc"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">oc</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#contents" class="table-of-contents__link toc-highlight">Contents</a></li><li><a href="#my-minikube-environment" class="table-of-contents__link toc-highlight">My minikube environment</a><ul><li><a href="#windows" class="table-of-contents__link toc-highlight">Windows</a></li></ul></li><li><a href="#operations" class="table-of-contents__link toc-highlight">Operations</a><ul><li><a href="#connect-to-a-host-having-minikube-vm" class="table-of-contents__link toc-highlight">Connect to a host having minikube VM</a></li><li><a href="#start-minikube" class="table-of-contents__link toc-highlight">start minikube</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#creating-vm-error" class="table-of-contents__link toc-highlight">Creating VM error</a></li><li><a href="#bad-certificate" class="table-of-contents__link toc-highlight">bad certificate</a></li></ul></li><li><a href="#commands-reference" class="table-of-contents__link toc-highlight">Commands reference</a></li><li><a href="#system-outlook" class="table-of-contents__link toc-highlight">System Outlook</a></li><li><a href="#reference" class="table-of-contents__link toc-highlight">Reference</a></li><li><a href="#lab" class="table-of-contents__link toc-highlight">Lab</a><ul><li><a href="#02-operating-containers" class="table-of-contents__link toc-highlight">02 Operating containers</a></li><li><a href="#04-running-an-application" class="table-of-contents__link toc-highlight">04 Running an Application</a></li><li><a href="#05-managing-application" class="table-of-contents__link toc-highlight">05 Managing application</a></li><li><a href="#06-exposing-applications-networking" class="table-of-contents__link toc-highlight">06 Exposing applications (Networking)</a></li><li><a href="#07-managing-pod-volumes" class="table-of-contents__link toc-highlight">07 Managing Pod Volumes</a></li></ul></li><li><a href="#test2" class="table-of-contents__link toc-highlight">test2</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cloud/docs/intro">Notes</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Jun Su Lee. Built with Docusaurus.</div></div></div></footer></div>
<script src="/cloud/assets/js/runtime~main.915f7a11.js"></script>
<script src="/cloud/assets/js/main.3de5cb3d.js"></script>
</body>
</html>