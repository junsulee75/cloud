<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-minikube">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="alternate" type="application/rss+xml" href="/cloud/blog/rss.xml" title="JS Cloud notes RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cloud/blog/atom.xml" title="JS Cloud notes Atom Feed"><title data-rh="true">minikube | JS Cloud notes</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://junsulee75.github.io/cloud/docs/minikube"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="minikube | JS Cloud notes"><meta data-rh="true" name="description" content="My minikube environment"><meta data-rh="true" property="og:description" content="My minikube environment"><link data-rh="true" rel="icon" href="/cloud/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://junsulee75.github.io/cloud/docs/minikube"><link data-rh="true" rel="alternate" href="https://junsulee75.github.io/cloud/docs/minikube" hreflang="en"><link data-rh="true" rel="alternate" href="https://junsulee75.github.io/cloud/docs/minikube" hreflang="x-default"><link rel="stylesheet" href="/cloud/assets/css/styles.7a7fd3ca.css">
<link rel="preload" href="/cloud/assets/js/runtime~main.576ae919.js" as="script">
<link rel="preload" href="/cloud/assets/js/main.2884efe4.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cloud/"><div class="navbar__logo"><img src="/cloud/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/cloud/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">JS cloud notes</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cloud/docs/intro">Notes</a><a class="navbar__item navbar__link" href="/cloud/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud/docs/intro">Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud/docs/docker">Docker notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud/docs/kube">Kubenetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud/docs/linux">Linux</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/cloud/docs/minikube">minikube</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud/docs/oc">Openshift</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cloud/docs/podman">podman</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cloud/docs/tutorial-basics/create-a-page">999.MISC</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cloud/docs/tutorial-extras/manage-docs-versions">999.Extras</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cloud/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">minikube</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>minikube</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="my-minikube-environment">My minikube environment<a class="hash-link" href="#my-minikube-environment" title="Direct link to heading">​</a></h2><p>On an old Windows thinkpad laptop with 24 GB memory, <code>Fedora</code> VMware VM.<br>
<!-- -->Starting <code>minikube</code> by <code>KVM</code> on the Fedora VM.     </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="operations">Operations<a class="hash-link" href="#operations" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="connect-to-minikube-vm-host">Connect to minikube VM host<a class="hash-link" href="#connect-to-minikube-vm-host" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh junsulee@fedora # login to fedora VM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo su -  # for operations needing root permission</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-minikube">start minikube<a class="hash-link" href="#start-minikube" title="Direct link to heading">​</a></h3><ul><li>Give KVM authority to users. give <code>libvirt</code> group to users.<br>Necessary to start <code>minikube</code> </li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@fedora kubernetes]# usermod -aG libvirt junsulee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@fedora kubernetes]# usermod -aG libvirt student</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@fedora ~]# grep vmx /proc/cpuinfo    ## should have `vmx` </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Start by a non root user      </li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">minikube start --memory 4096 --vm-driver=kvm2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>example :  </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora ~]$ minikube start --memory 4096 --vm-driver=kvm2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* minikube v1.20.0 on Fedora 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Using the kvm2 driver based on user configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Starting control plane node minikube in cluster minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Creating kvm2 VM (CPUs=2, Memory=4096MB, Disk=20000MB) ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Preparing Kubernetes v1.20.2 on Docker 20.10.6 ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Generating certificates and keys ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Booting up control plane ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Configuring RBAC rules ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Verifying Kubernetes components...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Using image gcr.io/k8s-minikube/storage-provisioner:v5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Enabled addons: default-storageclass, storage-provisioner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Done! kubectl is now configured to use &quot;minikube&quot; cluster and &quot;default&quot; namespace by default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When starting after system halt    </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora ~]$ minikube start --memory 4096 --vm-driver=kvm2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* minikube v1.20.0 on Fedora 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* minikube 1.22.0 is available! Download it: https://github.com/kubernetes/minikube/releases/tag/v1.22.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* To disable this notice, run: &#x27;minikube config set WantUpdateNotification false&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Using the kvm2 driver based on existing profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Starting control plane node minikube in cluster minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Restarting existing kvm2 VM for &quot;minikube&quot; ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Preparing Kubernetes v1.20.2 on Docker 20.10.6 ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">X Problems detected in kubelet:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Aug 29 23:38:41 minikube kubelet[2691]: E0829 23:38:41.239851    2691 pod_workers.go:191] Error syncing pod b320587ee357c92247809ba00ce3080a (&quot;kube-apiserver-minikube_kube-system(b320587ee357c92247809ba00ce3080a)&quot;), skipping: failed to &quot;StartContainer&quot; for &quot;kube-apiserver&quot; with CrashLoopBackOff: &quot;back-off 20s restarting failed container=kube-apiserver pod=kube-apiserver-minikube_kube-system(b320587ee357c92247809ba00ce3080a)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">X Problems detected in kubelet:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Aug 29 23:38:41 minikube kubelet[2691]: E0829 23:38:41.239851    2691 pod_workers.go:191] Error syncing pod b320587ee357c92247809ba00ce3080a (&quot;kube-apiserver-minikube_kube-system(b320587ee357c92247809ba00ce3080a)&quot;), skipping: failed to &quot;StartContainer&quot; for &quot;kube-apiserver&quot; with CrashLoopBackOff: &quot;back-off 20s restarting failed container=kube-apiserver pod=kube-apiserver-minikube_kube-system(b320587ee357c92247809ba00ce3080a)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Aug 29 23:38:50 minikube kubelet[2691]: E0829 23:38:50.122463    2691 pod_workers.go:191] Error syncing pod b320587ee357c92247809ba00ce3080a (&quot;kube-apiserver-minikube_kube-system(b320587ee357c92247809ba00ce3080a)&quot;), skipping: failed to &quot;StartContainer&quot; for &quot;kube-apiserver&quot; with CrashLoopBackOff: &quot;back-off 20s restarting failed container=kube-apiserver pod=kube-apiserver-minikube_kube-system(b320587ee357c92247809ba00ce3080a)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Aug 29 23:38:51 minikube kubelet[2691]: E0829 23:38:51.165528    2691 pod_workers.go:191] Error syncing pod 474c55dfb64741cc485e46b6bb9f2dc0 (&quot;kube-controller-manager-minikube_kube-system(474c55dfb64741cc485e46b6bb9f2dc0)&quot;), skipping: failed to &quot;StartContainer&quot; for &quot;kube-controller-manager&quot; with CrashLoopBackOff: &quot;back-off 20s restarting failed container=kube-controller-manager pod=kube-controller-manager-minikube_kube-system(474c55dfb64741cc485e46b6bb9f2dc0)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Aug 29 23:38:54 minikube kubelet[2691]: E0829 23:38:54.439750    2691 pod_workers.go:191] Error syncing pod 474c55dfb64741cc485e46b6bb9f2dc0 (&quot;kube-controller-manager-minikube_kube-system(474c55dfb64741cc485e46b6bb9f2dc0)&quot;), skipping: failed to &quot;StartContainer&quot; for &quot;kube-controller-manager&quot; with CrashLoopBackOff: &quot;back-off 20s restarting failed container=kube-controller-manager pod=kube-controller-manager-minikube_kube-system(474c55dfb64741cc485e46b6bb9f2dc0)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">! Unable to restart cluster, will reset it: apiserver health: apiserver healthz never reported healthy: cluster wait timed out during healthz check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Generating certificates and keys ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Booting up control plane ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Configuring RBAC rules ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Verifying Kubernetes components...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - Using image gcr.io/k8s-minikube/storage-provisioner:v5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Enabled addons: default-storageclass, storage-provisioner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Done! kubectl is now configured to use &quot;minikube&quot; cluster and &quot;default&quot; namespace by default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-vm-error">Creating VM error<a class="hash-link" href="#creating-vm-error" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="error">Error<a class="hash-link" href="#error" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">! StartHost failed, but will try again: creating host: create: Error creating machine: Error in driver during machine creation: error creating VM: virError(Code=1, Domain=10, Message=&#x27;internal error: process exited while connecting to monitor: 2021-05-17T07:32:21.253962Z qemu-system-x86_64: error: failed to set MSR 0x48f to 0x7fffff00036dfb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">qemu-system-x86_64: ../target/i386/kvm.c:2701: kvm_buf_set_msrs: Assertion `ret == cpu-&gt;kvm_msr_buf-&gt;nmsrs&#x27; failed.&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* Creating kvm2 VM (CPUs=2, Memory=4096MB, Disk=20000MB) ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution">Resolution<a class="hash-link" href="#resolution" title="Direct link to heading">​</a></h4><p><a href="https://github.com/kubernetes/minikube/issues/2968" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes/minikube/issues/2968</a>
<a href="https://github.com/kubernetes/minikube/issues/2412" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes/minikube/issues/2412</a></p><p>On vmware configuration, turn on &#x27;Virtualize CPU performance counters&#x27;.     </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bad-certificate"><a href="https://stackoverflow.com/questions/71542604/minikube-remote-error-tls-bad-certificate" target="_blank" rel="noopener noreferrer">bad certificate</a><a class="hash-link" href="#bad-certificate" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="error-1">Error<a class="hash-link" href="#error-1" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora ~]$ minikube_start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">😄  minikube v1.20.0 on Fedora 34</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">✨  Using the kvm2 driver based on existing profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">👍  Starting control plane node minikube in cluster minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">🔄  Restarting existing kvm2 VM for &quot;minikube&quot; ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">🐳  Preparing Kubernetes v1.20.2 on Docker 20.10.6 ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">❌  Problems detected in etcd [4e630926db47]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2022-05-21 04:49:16.015098 I | embed: rejected connection from &quot;127.0.0.1:53760&quot; (error &quot;remote error: tls: bad certificate&quot;, ServerName &quot;&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2022-05-21 04:49:19.119305 I | embed: rejected connection from &quot;127.0.0.1:53766&quot; (error &quot;remote error: tls: bad certificate&quot;, ServerName &quot;&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2022-05-21 04:49:20.231942 I | embed: rejected connection from &quot;127.0.0.1:53774&quot; (error &quot;remote error: tls: bad certificate&quot;, ServerName &quot;&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="resolution-1">Resolution<a class="hash-link" href="#resolution-1" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl conf view</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl config delete-cluster minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube delete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube_start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="commands-reference">Commands reference<a class="hash-link" href="#commands-reference" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">minikube dashboard   ## works in fedora GUI. Opening web browser</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="system-outlook">System Outlook<a class="hash-link" href="#system-outlook" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kube]$ kubectl get all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   17</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl get nodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME       STATUS   ROLES                  AGE   VERSION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">minikube   Ready    control-plane,master   6d    v1.20.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl cluster-info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Kubernetes control plane is running at https://192.168.39.235:8443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KubeDNS is running at https://192.168.39.235:8443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">To further debug and diagnose cluster problems, use &#x27;kubectl cluster-info dump&#x27;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora ~]$ kubectl config view</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clusters:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- cluster:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    certificate-authority: /home/junsulee/.minikube/ca.crt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    extensions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - extension:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        last-update: Sat, 14 May 2022 13:01:44 AEST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        provider: minikube.sigs.k8s.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        version: v1.20.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: cluster_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server: https://192.168.39.235:8443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contexts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- context:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cluster: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    extensions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - extension:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        last-update: Sat, 14 May 2022 13:01:44 AEST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        provider: minikube.sigs.k8s.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        version: v1.20.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: context_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">current-context: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">preferences: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">users:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  user:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client-certificate: /home/junsulee/.minikube/profiles/minikube/client.crt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client-key: /home/junsulee/.minikube/profiles/minikube/client.key</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a class="hash-link" href="#reference" title="Direct link to heading">​</a></h2><p><a href="https://github.com/sandervanvugt/kubernetes" target="_blank" rel="noopener noreferrer">Oreilly kubernetes education github repository</a></p><p><a href="https://borysneselovskyi.wordpress.com/2018/02/19/kvm-virtualization-on-top-of-the-vmware-workstation-12-guest-vms/" target="_blank" rel="noopener noreferrer">KVM Virtualization on VMware 12</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lab">Lab<a class="hash-link" href="#lab" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lab-02-operating-containers">Lab 02 Operating containers<a class="hash-link" href="#lab-02-operating-containers" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kube]$ docker run --rm -v /dev/log:/dev/log fedora:latest logger &quot;Message from the container&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Unable to find image &#x27;fedora:latest&#x27; locally</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">latest: Pulling from library/fedora</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">70fb9965a23f: Pull complete </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Digest: sha256:0c18a515203b836ea840f7033a11d6833f9468fda6a99f5a29695cfbaf43f24a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Status: Downloaded newer image for fedora:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kube]$ journalctl |grep container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Oct 03 20:40:39 fedora root[52426]: Message from the container</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lab-04-running-an-application">Lab 04 Running an Application<a class="hash-link" href="#lab-04-running-an-application" title="Direct link to heading">​</a></h3><p>To start from scratch, deploy existing deployment and pod</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora ~]$ kubectl get deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx   1/1     1            1           32d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora ~]$ kubectl get pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                         READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx-57bb5f6747-tv4sb   1/1     Running   0          31s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># at this time, the pod runs again because of deployment.   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># to clear, need to delete deployment together.   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora ~]$ kubectl delete deployment cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps &quot;cmd-nginx&quot; deleted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora ~]$ kubectl get deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No resources found in default namespace.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora ~]$ kubectl get pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                         READY   STATUS        RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx-57bb5f6747-tv4sb   0/1     Terminating   0          6m58s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora ~]$ kubectl delete pod cmd-nginx-57bb5f6747-tv4sb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod &quot;cmd-nginx-57bb5f6747-tv4sb&quot; deleted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora ~]$ kubectl get pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">No resources found in default namespace.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>create a example pod again </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora ~]$ kubectl create deployment cmd-nginx --image=nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora ~]$ kubectl get deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx   0/1     1            0           8s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora ~]$ kubectl get pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                         READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx-57bb5f6747-bgqz4   1/1     Running   0          15s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora work]$ kubectl get deployment.apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx   1/1     1            1           18h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create yaml referring existing apps.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora work]$ kubectl get deployment.apps -o yaml &gt; myngnix.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora work]$ cat myngnix.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">items:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      deployment.kubernetes.io/revision: &quot;1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    creationTimestamp: &quot;2022-06-24T05:14:35Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    generation: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      app: cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resourceVersion: &quot;1619298&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uid: ab2c24aa-c432-42b0-ad9a-7340019c1c5c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    progressDeadlineSeconds: 600</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    revisionHistoryLimit: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app: cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    strategy:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      rollingUpdate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        maxSurge: 25%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        maxUnavailable: 25%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type: RollingUpdate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        creationTimestamp: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          app: cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - image: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          imagePullPolicy: Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          resources: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          terminationMessagePath: /dev/termination-log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          terminationMessagePolicy: File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dnsPolicy: ClusterFirst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        restartPolicy: Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        schedulerName: default-scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        securityContext: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        terminationGracePeriodSeconds: 30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  status:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    availableReplicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    conditions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - lastTransitionTime: &quot;2022-06-24T05:14:48Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      lastUpdateTime: &quot;2022-06-24T05:14:48Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      message: Deployment has minimum availability.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      reason: MinimumReplicasAvailable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status: &quot;True&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type: Available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - lastTransitionTime: &quot;2022-06-24T05:14:35Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      lastUpdateTime: &quot;2022-06-24T05:14:48Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      message: ReplicaSet &quot;cmd-nginx-57bb5f6747&quot; has successfully progressed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      reason: NewReplicaSetAvailable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      status: &quot;True&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type: Progressing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    observedGeneration: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    readyReplicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    updatedReplicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: List</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resourceVersion: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selfLink: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Remove unnecessary parts.  </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora work]$ cp myngnix.yaml myngnix_org.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora work]$ cat myngnix.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">items:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kind: Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      deployment.kubernetes.io/revision: &quot;1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    generation: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      app: cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    progressDeadlineSeconds: 600</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    revisionHistoryLimit: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    selector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      matchLabels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        app: cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    strategy:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      rollingUpdate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        maxSurge: 25%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        maxUnavailable: 25%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      type: RollingUpdate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        creationTimestamp: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        labels:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          app: cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - image: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          imagePullPolicy: Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          name: nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          resources: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          terminationMessagePath: /dev/termination-log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          terminationMessagePolicy: File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        dnsPolicy: ClusterFirst</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        restartPolicy: Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        schedulerName: default-scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        securityContext: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        terminationGracePeriodSeconds: 30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora work]$</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora work]$ diff myngnix_org.yaml myngnix.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">8d7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     creationTimestamp: &quot;2022-06-24T05:14:35Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">14,15d12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     resourceVersion: &quot;1619298&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     uid: ab2c24aa-c432-42b0-ad9a-7340019c1c5c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">46,68d42</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;   status:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     availableReplicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     conditions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     - lastTransitionTime: &quot;2022-06-24T05:14:48Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       lastUpdateTime: &quot;2022-06-24T05:14:48Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       message: Deployment has minimum availability.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       reason: MinimumReplicasAvailable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       status: &quot;True&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       type: Available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     - lastTransitionTime: &quot;2022-06-24T05:14:35Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       lastUpdateTime: &quot;2022-06-24T05:14:48Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       message: ReplicaSet &quot;cmd-nginx-57bb5f6747&quot; has successfully progressed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       reason: NewReplicaSetAvailable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       status: &quot;True&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;       type: Progressing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     observedGeneration: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     readyReplicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     replicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;     updatedReplicas: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; kind: List</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt; metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;   resourceVersion: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;   selfLink: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lab-05-managing-application">Lab 05 Managing application<a class="hash-link" href="#lab-05-managing-application" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="labels">Labels<a class="hash-link" href="#labels" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora work]$ kubectl get all --show-labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                             READY   STATUS    RESTARTS   AGE   LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-bgqz4   1/1     Running   0          20h   app=cmd-nginx,pod-template-hash=57bb5f6747</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE   LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   34d   component=apiserver,provider=kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                        READY   UP-TO-DATE   AVAILABLE   AGE   LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx   1/1     1            1           20h   app=cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                   DESIRED   CURRENT   READY   AGE   LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/cmd-nginx-57bb5f6747   1         1         1       20h   app=cmd-nginx,pod-template-hash=57bb5f6747</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora work]$ kubectl label pods ^C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora work]$ kubectl get pods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                         READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx-57bb5f6747-bgqz4   1/1     Running   0          20h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Set Label</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora work]$ kubectl label pods cmd-nginx-57bb5f6747-bgqz4 app-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-bgqz4 labeled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora work]$ kubectl get all --show-labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                             READY   STATUS    RESTARTS   AGE   LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-6clxd   1/1     Running   0          44s   app=cmd-nginx,pod-template-hash=57bb5f6747</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-bgqz4   1/1     Running   0          20h   pod-template-hash=57bb5f6747</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE   LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   34d   component=apiserver,provider=kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                        READY   UP-TO-DATE   AVAILABLE   AGE   LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx   1/1     1            1           20h   app=cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                   DESIRED   CURRENT   READY   AGE   LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/cmd-nginx-57bb5f6747   1         1         1       20h   app=cmd-nginx,pod-template-hash=57bb5f6747</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It removed <code>app-</code> from existing pod label, then created new pod with the existing name<br>
<!-- -->because k8s monitors the label and make sure specific amount of the label is available.<br>
<!-- -->It means k8s does not look at the pod itself but looking at the <code>label</code>.      </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-an-application">Running an application<a class="hash-link" href="#running-an-application" title="Direct link to heading">​</a></h4><p><code>Pod</code> specification from <code>template</code>.    </p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">junsulee@fedora kubernetes</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">$ cat redis</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deploy.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6379</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Error due to wrong version.     </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl create -f redis-deploy.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error: unable to recognize &quot;redis-deploy.yaml&quot;: no matches for kind &quot;Deployment&quot; in version &quot;apps/v1beta</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Correcting and creating again.<br>
<code>apiVersion: apps/v1beta1</code>  =&gt;  <code>apiVersion: apps/v1</code>     </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl create -f redis-deploy.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/redis created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx   1/1     1            1           20h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis       0/1     1            0           9s     &lt;====</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get pods</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                         READY   STATUS              RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx-57bb5f6747-6clxd   1/1     Running             0          39m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx-57bb5f6747-bgqz4   1/1     Running             0          20h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis-6fb5b985bc-6q7fk       0/1     ContainerCreating   0          16s  &lt;=====  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get deployment --show-labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        READY   UP-TO-DATE   AVAILABLE   AGE    LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx   1/1     1            1           20h    app=cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis       1/1     1            1           2m8s   app=redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get all --selector app=redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                         READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/redis-6fb5b985bc-6q7fk   1/1     Running   0          2m21s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                    READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/redis   1/1     1            1           2m21s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                               DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/redis-6fb5b985bc   1         1         1       2m21s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="namespace">namespace<a class="hash-link" href="#namespace" title="Direct link to heading">​</a></h4><p>Download namespace related utilities.     </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/ahmetb/kubectx  # Download kubectx packages.    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp kubectx/kubensx /usr/local/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp kubectx/kubens /usr/local/bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Namespace list    </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubens</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-node-lease</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get ns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                   STATUS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default                Active   34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-node-lease        Active   34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-public            Active   34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            Active   34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard   Active   33d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Switching between namespaces</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubens kube-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Context &quot;minikube&quot; modified.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Active namespace is &quot;kube-system&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                   READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/coredns-74ff55c5b-qgdjv            1/1     Running   1          34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/etcd-minikube                      1/1     Running   26         34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/kube-apiserver-minikube            1/1     Running   60         34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/kube-controller-manager-minikube   1/1     Running   3          34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/kube-proxy-x48k4                   1/1     Running   1          34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/kube-scheduler-minikube            1/1     Running   1          34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/storage-provisioner                1/1     Running   107        34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME               TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)                  AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/kube-dns   ClusterIP   10.96.0.10   &lt;none&gt;        53/UDP,53/TCP,9153/TCP   34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                        DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR            AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">daemonset.apps/kube-proxy   1         1         1       1            1           kubernetes.io/os=linux   34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                      READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/coredns   1/1     1            1           34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/coredns-74ff55c5b   1         1         1       34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubens</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-node-lease</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubens default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Context &quot;minikube&quot; modified.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Active namespace is &quot;default&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                             READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-6clxd   1/1     Running   0          89m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-bgqz4   1/1     Running   0          21h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/redis-6fb5b985bc-6q7fk       1/1     Running   0          50m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx   1/1     1            1           21h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/redis       1/1     1            1           50m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                   DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/cmd-nginx-57bb5f6747   1         1         1       21h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/redis-6fb5b985bc       1         1         1       50m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ cd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora ~]$ cd .kube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora .kube]$ cat config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clusters:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- cluster:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    certificate-authority: /home/junsulee/.minikube/ca.crt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    extensions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - extension:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        last-update: Wed, 22 Jun 2022 12:12:20 AEST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        provider: minikube.sigs.k8s.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        version: v1.20.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: cluster_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server: https://192.168.39.25:8443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contexts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- context:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cluster: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    extensions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - extension:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        last-update: Wed, 22 Jun 2022 12:12:20 AEST</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        provider: minikube.sigs.k8s.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        version: v1.20.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      name: context_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">current-context: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">preferences: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">users:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: minikube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  user:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client-certificate: /home/junsulee/.minikube/profiles/minikube/client.crt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client-key: /home/junsulee/.minikube/profiles/minikube/client.key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create a namespace and a pod on the namespace.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora .kube]$ kubectl create ns myspace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace/myspace created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubens</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default  &lt;=== current</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-node-lease</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">myspace   &lt;=== new</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl create -f busybox.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/busybox2 created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># expected error creating same name pod in the same namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl create -f busybox.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error from server (AlreadyExists): error when creating &quot;busybox.yaml&quot;: pods &quot;busybox2&quot; already exists</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ cp busybox.yaml busbox2.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># corrected namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ cat busybox2.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: busybox2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: myspace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - name: busy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - &quot;3600&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl create -f busybox2.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/busybox2 created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get all -n myspace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME           READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/busybox2   1/1     Running   0          92s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="num-of-replicas">num of replicas<a class="hash-link" href="#num-of-replicas" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">junsulee@fedora kubernetes]$ kubectl get deployments.apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx   1/1     1            1           22h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis       1/1     1            1           81m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl edit deployment cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx edited</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get deployments.apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx   2/2     2            2           22h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis       1/1     1            1           86m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get deployments.apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx   2/2     2            2           22h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis       1/1     1            1           86m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl scale --replicas=1 cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error: the server doesn&#x27;t have a resource type &quot;cmd-nginx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl scale --replicas=1 deployment cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx scaled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get deployments.apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cmd-nginx   1/1     1            1           22h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis       1/1     1            1           102m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="managing-application-updates-and-rollbacks">Managing application updates and rollbacks<a class="hash-link" href="#managing-application-updates-and-rollbacks" title="Direct link to heading">​</a></h4><p>Create a pod for test</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl create deployment rollingnginx --image=nginx:1.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/rollingnginx created</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                READY   STATUS      RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/rollingnginx-785db9758d-7k6zc   1/1     Running     0          62s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl rollout history deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION  CHANGE-CAUSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1         &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION  CHANGE-CAUSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1         &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION  CHANGE-CAUSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1         &lt;none&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Edit version.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl edit deployments.apps rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">..</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- image: nginx:1.8    &lt;=== changed to 1.15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">..</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl rollout history deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION  CHANGE-CAUSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1         &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION  CHANGE-CAUSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1         &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REVISION  CHANGE-CAUSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1         &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2         &lt;none&gt;     &lt;======</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl describe deployments.apps rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name:                   rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Namespace:              default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CreationTimestamp:      Sat, 25 Jun 2022 14:03:49 +1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Labels:                 app=rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Annotations:            deployment.kubernetes.io/revision: 2    &lt;====</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Selector:               app=rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Replicas:               1 desired | 1 updated | 1 total | 1 available | 0 unavailable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StrategyType:           RollingUpdate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MinReadySeconds:        0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RollingUpdateStrategy:  25% max unavailable, 25% max surge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pod Template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Labels:  app=rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   nginx:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Image:        nginx:1.15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Port:         &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Host Port:    &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Environment:  &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Mounts:       &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Volumes:        &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Conditions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type           Status  Reason</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ----           ------  ------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Available      True    MinimumReplicasAvailable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Progressing    True    NewReplicaSetAvailable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OldReplicaSets:  &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NewReplicaSet:   rollingnginx-58cff98f76 (1/1 replicas created)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Events:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type    Reason             Age    From                   Message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ----    ------             ----   ----                   -------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  ScalingReplicaSet  8m51s  deployment-controller  Scaled up replica set rollingnginx-785db9758d to 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  ScalingReplicaSet  104s   deployment-controller  Scaled up replica set rollingnginx-58cff98f76 to 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Normal  ScalingReplicaSet  62s    deployment-controller  Scaled down replica set rollingnginx-785db9758d to 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl rollout history deployment rollingnginx --revision=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/rollingnginx with revision #1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pod Template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Labels:   app=rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pod-template-hash=785db9758d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   nginx:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Image:  nginx:1.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Port:   &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Host Port:  &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Environment:    &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Mounts: &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Volumes:  &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl rollout history deployment rollingnginx --revision=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/rollingnginx with revision #2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pod Template:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Labels:   app=rollingnginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pod-template-hash=58cff98f76</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Containers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   nginx:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Image:  nginx:1.15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Port:   &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Host Port:  &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Environment:    &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Mounts: &lt;none&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Volumes:  &lt;none&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Two replica sets are shown. Old one will be gone eventually.   </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/busybox2                        1/1     Running   1          72m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-6clxd      1/1     Running   0          173m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-bgqz4      1/1     Running   0          23h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/redis-6fb5b985bc-6q7fk          1/1     Running   0          134m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/rollingnginx-58cff98f76-997zw   1/1     Running   0          6m15s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                           READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx      1/1     1            1           23h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/redis          1/1     1            1           134m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/rollingnginx   1/1     1            1           13m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                      DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/cmd-nginx-57bb5f6747      1         1         1       23h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/redis-6fb5b985bc          1         1         1       134m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/rollingnginx-58cff98f76   1         1         1       6m17s    &lt;===</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/rollingnginx-785db9758d   0         0         0       13m      </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Rollback </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">junsulee@fedora kubernetes]$ kubectl rollout undo deployment rollingnginx --to-revision=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/rollingnginx rolled back</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[junsulee@fedora kubernetes]$ kubectl get all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/busybox2                        1/1     Running   1          76m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-6clxd      1/1     Running   0          177m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/cmd-nginx-57bb5f6747-bgqz4      1/1     Running   0          23h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/redis-6fb5b985bc-6q7fk          1/1     Running   0          138m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pod/rollingnginx-785db9758d-kzgd5   1/1     Running   0          79s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   34d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                           READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/cmd-nginx      1/1     1            1           23h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/redis          1/1     1            1           138m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deployment.apps/rollingnginx   1/1     1            1           16m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NAME                                      DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/cmd-nginx-57bb5f6747      1         1         1       23h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/redis-6fb5b985bc          1         1         1       138m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/rollingnginx-58cff98f76   0         0         0       9m45s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replicaset.apps/rollingnginx-785db9758d   1         1         1       16m   &lt;====</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/docs/minikube.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/cloud/docs/linux"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Linux</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cloud/docs/oc"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Openshift</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#my-minikube-environment" class="table-of-contents__link toc-highlight">My minikube environment</a></li><li><a href="#operations" class="table-of-contents__link toc-highlight">Operations</a><ul><li><a href="#connect-to-minikube-vm-host" class="table-of-contents__link toc-highlight">Connect to minikube VM host</a></li><li><a href="#start-minikube" class="table-of-contents__link toc-highlight">start minikube</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#creating-vm-error" class="table-of-contents__link toc-highlight">Creating VM error</a></li><li><a href="#bad-certificate" class="table-of-contents__link toc-highlight">bad certificate</a></li></ul></li><li><a href="#commands-reference" class="table-of-contents__link toc-highlight">Commands reference</a></li><li><a href="#system-outlook" class="table-of-contents__link toc-highlight">System Outlook</a></li><li><a href="#reference" class="table-of-contents__link toc-highlight">Reference</a></li><li><a href="#lab" class="table-of-contents__link toc-highlight">Lab</a><ul><li><a href="#lab-02-operating-containers" class="table-of-contents__link toc-highlight">Lab 02 Operating containers</a></li><li><a href="#lab-04-running-an-application" class="table-of-contents__link toc-highlight">Lab 04 Running an Application</a></li><li><a href="#lab-05-managing-application" class="table-of-contents__link toc-highlight">Lab 05 Managing application</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cloud/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cloud/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/cloud/assets/js/runtime~main.576ae919.js"></script>
<script src="/cloud/assets/js/main.2884efe4.js"></script>
</body>
</html>